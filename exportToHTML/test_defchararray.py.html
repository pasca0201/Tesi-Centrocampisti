<html>
<head>
<title>test_defchararray.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cf8e6d;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #6aab73;}
.s4 { color: #7a7e85;}
.s5 { color: #2aacb8;}
.s6 { color: #a5c261;}
.s7 { color: #5f826b; font-style: italic;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
test_defchararray.py</font>
</center></td></tr></table>
<pre><span class="s0">import </span><span class="s1">pytest</span>

<span class="s0">import </span><span class="s1">numpy </span><span class="s0">as </span><span class="s1">np</span>
<span class="s0">from </span><span class="s1">numpy</span><span class="s2">.</span><span class="s1">_core</span><span class="s2">.</span><span class="s1">multiarray </span><span class="s0">import </span><span class="s1">_vec_string</span>
<span class="s0">from </span><span class="s1">numpy</span><span class="s2">.</span><span class="s1">testing </span><span class="s0">import </span><span class="s2">(</span>
    <span class="s1">assert_</span><span class="s2">, </span><span class="s1">assert_equal</span><span class="s2">, </span><span class="s1">assert_array_equal</span><span class="s2">, </span><span class="s1">assert_raises</span><span class="s2">,</span>
    <span class="s1">assert_raises_regex</span>
    <span class="s2">)</span>

<span class="s1">kw_unicode_true </span><span class="s2">= {</span><span class="s3">'unicode'</span><span class="s2">: </span><span class="s0">True</span><span class="s2">}  </span><span class="s4"># make 2to3 work properly</span>
<span class="s1">kw_unicode_false </span><span class="s2">= {</span><span class="s3">'unicode'</span><span class="s2">: </span><span class="s0">False</span><span class="s2">}</span>

<span class="s0">class </span><span class="s1">TestBasic</span><span class="s2">:</span>
    <span class="s0">def </span><span class="s1">test_from_object_array</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">A </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s3">'abc'</span><span class="s2">, </span><span class="s5">2</span><span class="s2">],</span>
                      <span class="s2">[</span><span class="s3">'long   '</span><span class="s2">, </span><span class="s3">'0123456789'</span><span class="s2">]], </span><span class="s1">dtype</span><span class="s2">=</span><span class="s3">'O'</span><span class="s2">)</span>
        <span class="s1">B </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">array</span><span class="s2">(</span><span class="s1">A</span><span class="s2">)</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">B</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">itemsize</span><span class="s2">, </span><span class="s5">10</span><span class="s2">)</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">B</span><span class="s2">, [[</span><span class="s6">b'abc'</span><span class="s2">, </span><span class="s6">b'2'</span><span class="s2">],</span>
                               <span class="s2">[</span><span class="s6">b'long'</span><span class="s2">, </span><span class="s6">b'0123456789'</span><span class="s2">]])</span>

    <span class="s0">def </span><span class="s1">test_from_object_array_unicode</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">A </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s3">'abc'</span><span class="s2">, </span><span class="s3">'Sigma </span><span class="s0">\u03a3</span><span class="s3">'</span><span class="s2">],</span>
                      <span class="s2">[</span><span class="s3">'long   '</span><span class="s2">, </span><span class="s3">'0123456789'</span><span class="s2">]], </span><span class="s1">dtype</span><span class="s2">=</span><span class="s3">'O'</span><span class="s2">)</span>
        <span class="s1">assert_raises</span><span class="s2">(</span><span class="s1">ValueError</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">array</span><span class="s2">, (</span><span class="s1">A</span><span class="s2">,))</span>
        <span class="s1">B </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">array</span><span class="s2">(</span><span class="s1">A</span><span class="s2">, **</span><span class="s1">kw_unicode_true</span><span class="s2">)</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">B</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">itemsize</span><span class="s2">, </span><span class="s5">10 </span><span class="s2">* </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">(</span><span class="s3">'a'</span><span class="s2">, </span><span class="s3">'U'</span><span class="s2">).</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">itemsize</span><span class="s2">)</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">B</span><span class="s2">, [[</span><span class="s3">'abc'</span><span class="s2">, </span><span class="s3">'Sigma </span><span class="s0">\u03a3</span><span class="s3">'</span><span class="s2">],</span>
                               <span class="s2">[</span><span class="s3">'long'</span><span class="s2">, </span><span class="s3">'0123456789'</span><span class="s2">]])</span>

    <span class="s0">def </span><span class="s1">test_from_string_array</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">A </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s6">b'abc'</span><span class="s2">, </span><span class="s6">b'foo'</span><span class="s2">],</span>
                      <span class="s2">[</span><span class="s6">b'long   '</span><span class="s2">, </span><span class="s6">b'0123456789'</span><span class="s2">]])</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">A</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bytes_</span><span class="s2">)</span>
        <span class="s1">B </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">array</span><span class="s2">(</span><span class="s1">A</span><span class="s2">)</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">B</span><span class="s2">, </span><span class="s1">A</span><span class="s2">)</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">B</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">, </span><span class="s1">A</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">)</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">B</span><span class="s2">.</span><span class="s1">shape</span><span class="s2">, </span><span class="s1">A</span><span class="s2">.</span><span class="s1">shape</span><span class="s2">)</span>
        <span class="s1">B</span><span class="s2">[</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">] = </span><span class="s3">'changed'</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">B</span><span class="s2">[</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">] != </span><span class="s1">A</span><span class="s2">[</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">])</span>
        <span class="s1">C </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">asarray</span><span class="s2">(</span><span class="s1">A</span><span class="s2">)</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">C</span><span class="s2">, </span><span class="s1">A</span><span class="s2">)</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">C</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">, </span><span class="s1">A</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">)</span>
        <span class="s1">C</span><span class="s2">[</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">] = </span><span class="s3">'changed again'</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">C</span><span class="s2">[</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">] != </span><span class="s1">B</span><span class="s2">[</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">])</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">C</span><span class="s2">[</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">] == </span><span class="s1">A</span><span class="s2">[</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">])</span>

    <span class="s0">def </span><span class="s1">test_from_unicode_array</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">A </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s3">'abc'</span><span class="s2">, </span><span class="s3">'Sigma </span><span class="s0">\u03a3</span><span class="s3">'</span><span class="s2">],</span>
                      <span class="s2">[</span><span class="s3">'long   '</span><span class="s2">, </span><span class="s3">'0123456789'</span><span class="s2">]])</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">A</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">str_</span><span class="s2">)</span>
        <span class="s1">B </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">array</span><span class="s2">(</span><span class="s1">A</span><span class="s2">)</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">B</span><span class="s2">, </span><span class="s1">A</span><span class="s2">)</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">B</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">, </span><span class="s1">A</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">)</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">B</span><span class="s2">.</span><span class="s1">shape</span><span class="s2">, </span><span class="s1">A</span><span class="s2">.</span><span class="s1">shape</span><span class="s2">)</span>
        <span class="s1">B </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">array</span><span class="s2">(</span><span class="s1">A</span><span class="s2">, **</span><span class="s1">kw_unicode_true</span><span class="s2">)</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">B</span><span class="s2">, </span><span class="s1">A</span><span class="s2">)</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">B</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">, </span><span class="s1">A</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">)</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">B</span><span class="s2">.</span><span class="s1">shape</span><span class="s2">, </span><span class="s1">A</span><span class="s2">.</span><span class="s1">shape</span><span class="s2">)</span>

        <span class="s0">def </span><span class="s1">fail</span><span class="s2">():</span>
            <span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">array</span><span class="s2">(</span><span class="s1">A</span><span class="s2">, **</span><span class="s1">kw_unicode_false</span><span class="s2">)</span>

        <span class="s1">assert_raises</span><span class="s2">(</span><span class="s1">UnicodeEncodeError</span><span class="s2">, </span><span class="s1">fail</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_unicode_upconvert</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">A </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([</span><span class="s3">'abc'</span><span class="s2">])</span>
        <span class="s1">B </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([</span><span class="s3">'</span><span class="s0">\u03a3</span><span class="s3">'</span><span class="s2">])</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">((</span><span class="s1">A </span><span class="s2">+ </span><span class="s1">B</span><span class="s2">).</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">str_</span><span class="s2">))</span>

    <span class="s0">def </span><span class="s1">test_from_string</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">A </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">array</span><span class="s2">(</span><span class="s6">b'abc'</span><span class="s2">)</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">len</span><span class="s2">(</span><span class="s1">A</span><span class="s2">), </span><span class="s5">1</span><span class="s2">)</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">len</span><span class="s2">(</span><span class="s1">A</span><span class="s2">[</span><span class="s5">0</span><span class="s2">]), </span><span class="s5">3</span><span class="s2">)</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">A</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bytes_</span><span class="s2">))</span>

    <span class="s0">def </span><span class="s1">test_from_unicode</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">A </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">array</span><span class="s2">(</span><span class="s3">'</span><span class="s0">\u03a3</span><span class="s3">'</span><span class="s2">)</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">len</span><span class="s2">(</span><span class="s1">A</span><span class="s2">), </span><span class="s5">1</span><span class="s2">)</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">len</span><span class="s2">(</span><span class="s1">A</span><span class="s2">[</span><span class="s5">0</span><span class="s2">]), </span><span class="s5">1</span><span class="s2">)</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">A</span><span class="s2">.</span><span class="s1">itemsize</span><span class="s2">, </span><span class="s5">4</span><span class="s2">)</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">A</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">str_</span><span class="s2">))</span>

<span class="s0">class </span><span class="s1">TestVecString</span><span class="s2">:</span>
    <span class="s0">def </span><span class="s1">test_non_existent_method</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>

        <span class="s0">def </span><span class="s1">fail</span><span class="s2">():</span>
            <span class="s1">_vec_string</span><span class="s2">(</span><span class="s3">'a'</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bytes_</span><span class="s2">, </span><span class="s3">'bogus'</span><span class="s2">)</span>

        <span class="s1">assert_raises</span><span class="s2">(</span><span class="s1">AttributeError</span><span class="s2">, </span><span class="s1">fail</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_non_string_array</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>

        <span class="s0">def </span><span class="s1">fail</span><span class="s2">():</span>
            <span class="s1">_vec_string</span><span class="s2">(</span><span class="s5">1</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bytes_</span><span class="s2">, </span><span class="s3">'strip'</span><span class="s2">)</span>

        <span class="s1">assert_raises</span><span class="s2">(</span><span class="s1">TypeError</span><span class="s2">, </span><span class="s1">fail</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_invalid_args_tuple</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>

        <span class="s0">def </span><span class="s1">fail</span><span class="s2">():</span>
            <span class="s1">_vec_string</span><span class="s2">([</span><span class="s3">'a'</span><span class="s2">], </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bytes_</span><span class="s2">, </span><span class="s3">'strip'</span><span class="s2">, </span><span class="s5">1</span><span class="s2">)</span>

        <span class="s1">assert_raises</span><span class="s2">(</span><span class="s1">TypeError</span><span class="s2">, </span><span class="s1">fail</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_invalid_type_descr</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>

        <span class="s0">def </span><span class="s1">fail</span><span class="s2">():</span>
            <span class="s1">_vec_string</span><span class="s2">([</span><span class="s3">'a'</span><span class="s2">], </span><span class="s3">'BOGUS'</span><span class="s2">, </span><span class="s3">'strip'</span><span class="s2">)</span>

        <span class="s1">assert_raises</span><span class="s2">(</span><span class="s1">TypeError</span><span class="s2">, </span><span class="s1">fail</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_invalid_function_args</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>

        <span class="s0">def </span><span class="s1">fail</span><span class="s2">():</span>
            <span class="s1">_vec_string</span><span class="s2">([</span><span class="s3">'a'</span><span class="s2">], </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bytes_</span><span class="s2">, </span><span class="s3">'strip'</span><span class="s2">, (</span><span class="s5">1</span><span class="s2">,))</span>

        <span class="s1">assert_raises</span><span class="s2">(</span><span class="s1">TypeError</span><span class="s2">, </span><span class="s1">fail</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_invalid_result_type</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>

        <span class="s0">def </span><span class="s1">fail</span><span class="s2">():</span>
            <span class="s1">_vec_string</span><span class="s2">([</span><span class="s3">'a'</span><span class="s2">], </span><span class="s1">np</span><span class="s2">.</span><span class="s1">int_</span><span class="s2">, </span><span class="s3">'strip'</span><span class="s2">)</span>

        <span class="s1">assert_raises</span><span class="s2">(</span><span class="s1">TypeError</span><span class="s2">, </span><span class="s1">fail</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_broadcast_error</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>

        <span class="s0">def </span><span class="s1">fail</span><span class="s2">():</span>
            <span class="s1">_vec_string</span><span class="s2">([[</span><span class="s3">'abc'</span><span class="s2">, </span><span class="s3">'def'</span><span class="s2">]], </span><span class="s1">np</span><span class="s2">.</span><span class="s1">int_</span><span class="s2">, </span><span class="s3">'find'</span><span class="s2">, ([</span><span class="s3">'a'</span><span class="s2">, </span><span class="s3">'d'</span><span class="s2">, </span><span class="s3">'j'</span><span class="s2">],))</span>

        <span class="s1">assert_raises</span><span class="s2">(</span><span class="s1">ValueError</span><span class="s2">, </span><span class="s1">fail</span><span class="s2">)</span>


<span class="s0">class </span><span class="s1">TestWhitespace</span><span class="s2">:</span>
    <span class="s0">def </span><span class="s1">setup_method</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">A </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s3">'abc '</span><span class="s2">, </span><span class="s3">'123  '</span><span class="s2">],</span>
                           <span class="s2">[</span><span class="s3">'789 '</span><span class="s2">, </span><span class="s3">'xyz '</span><span class="s2">]]).</span><span class="s1">view</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">B </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s3">'abc'</span><span class="s2">, </span><span class="s3">'123'</span><span class="s2">],</span>
                           <span class="s2">[</span><span class="s3">'789'</span><span class="s2">, </span><span class="s3">'xyz'</span><span class="s2">]]).</span><span class="s1">view</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test1</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">all</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A </span><span class="s2">== </span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">))</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">all</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A </span><span class="s2">&gt;= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">))</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">all</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A </span><span class="s2">&lt;= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">))</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s0">not </span><span class="s1">np</span><span class="s2">.</span><span class="s1">any</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A </span><span class="s2">&gt; </span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">))</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s0">not </span><span class="s1">np</span><span class="s2">.</span><span class="s1">any</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A </span><span class="s2">&lt; </span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">))</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s0">not </span><span class="s1">np</span><span class="s2">.</span><span class="s1">any</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A </span><span class="s2">!= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">))</span>

<span class="s0">class </span><span class="s1">TestChar</span><span class="s2">:</span>
    <span class="s0">def </span><span class="s1">setup_method</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">A </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">(</span><span class="s3">'abc1'</span><span class="s2">, </span><span class="s1">dtype</span><span class="s2">=</span><span class="s3">'c'</span><span class="s2">).</span><span class="s1">view</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_it</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">shape</span><span class="s2">, (</span><span class="s5">4</span><span class="s2">,))</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">upper</span><span class="s2">()[:</span><span class="s5">2</span><span class="s2">].</span><span class="s1">tobytes</span><span class="s2">(), </span><span class="s6">b'AB'</span><span class="s2">)</span>

<span class="s0">class </span><span class="s1">TestComparisons</span><span class="s2">:</span>
    <span class="s0">def </span><span class="s1">setup_method</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">A </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s3">'abc'</span><span class="s2">, </span><span class="s3">'abcc'</span><span class="s2">, </span><span class="s3">'123'</span><span class="s2">],</span>
                           <span class="s2">[</span><span class="s3">'789'</span><span class="s2">, </span><span class="s3">'abc'</span><span class="s2">, </span><span class="s3">'xyz'</span><span class="s2">]]).</span><span class="s1">view</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">B </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s3">'efg'</span><span class="s2">, </span><span class="s3">'efg'</span><span class="s2">, </span><span class="s3">'123  '</span><span class="s2">],</span>
                           <span class="s2">[</span><span class="s3">'051'</span><span class="s2">, </span><span class="s3">'efgg'</span><span class="s2">, </span><span class="s3">'tuv'</span><span class="s2">]]).</span><span class="s1">view</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_not_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_array_equal</span><span class="s2">((</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A </span><span class="s2">!= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">),</span>
                           <span class="s2">[[</span><span class="s0">True</span><span class="s2">, </span><span class="s0">True</span><span class="s2">, </span><span class="s0">False</span><span class="s2">], [</span><span class="s0">True</span><span class="s2">, </span><span class="s0">True</span><span class="s2">, </span><span class="s0">True</span><span class="s2">]])</span>

    <span class="s0">def </span><span class="s1">test_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_array_equal</span><span class="s2">((</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A </span><span class="s2">== </span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">),</span>
                           <span class="s2">[[</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">, </span><span class="s0">True</span><span class="s2">], [</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">]])</span>

    <span class="s0">def </span><span class="s1">test_greater_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_array_equal</span><span class="s2">((</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A </span><span class="s2">&gt;= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">),</span>
                           <span class="s2">[[</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">, </span><span class="s0">True</span><span class="s2">], [</span><span class="s0">True</span><span class="s2">, </span><span class="s0">False</span><span class="s2">, </span><span class="s0">True</span><span class="s2">]])</span>

    <span class="s0">def </span><span class="s1">test_less_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_array_equal</span><span class="s2">((</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A </span><span class="s2">&lt;= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">),</span>
                           <span class="s2">[[</span><span class="s0">True</span><span class="s2">, </span><span class="s0">True</span><span class="s2">, </span><span class="s0">True</span><span class="s2">], [</span><span class="s0">False</span><span class="s2">, </span><span class="s0">True</span><span class="s2">, </span><span class="s0">False</span><span class="s2">]])</span>

    <span class="s0">def </span><span class="s1">test_greater</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_array_equal</span><span class="s2">((</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A </span><span class="s2">&gt; </span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">),</span>
                           <span class="s2">[[</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">], [</span><span class="s0">True</span><span class="s2">, </span><span class="s0">False</span><span class="s2">, </span><span class="s0">True</span><span class="s2">]])</span>

    <span class="s0">def </span><span class="s1">test_less</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_array_equal</span><span class="s2">((</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A </span><span class="s2">&lt; </span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">),</span>
                           <span class="s2">[[</span><span class="s0">True</span><span class="s2">, </span><span class="s0">True</span><span class="s2">, </span><span class="s0">False</span><span class="s2">], [</span><span class="s0">False</span><span class="s2">, </span><span class="s0">True</span><span class="s2">, </span><span class="s0">False</span><span class="s2">]])</span>

    <span class="s0">def </span><span class="s1">test_type</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">out1 </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">)</span>
        <span class="s1">out2 </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">equal</span><span class="s2">(</span><span class="s3">'a'</span><span class="s2">, </span><span class="s3">'a'</span><span class="s2">)</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">out1</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">ndarray</span><span class="s2">))</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">out2</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">ndarray</span><span class="s2">))</span>

<span class="s0">class </span><span class="s1">TestComparisonsMixed1</span><span class="s2">(</span><span class="s1">TestComparisons</span><span class="s2">):</span>
    <span class="s7">&quot;&quot;&quot;Ticket #1276&quot;&quot;&quot;</span>

    <span class="s0">def </span><span class="s1">setup_method</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">TestComparisons</span><span class="s2">.</span><span class="s1">setup_method</span><span class="s2">(</span><span class="s1">self</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">B </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">(</span>
            <span class="s2">[[</span><span class="s3">'efg'</span><span class="s2">, </span><span class="s3">'efg'</span><span class="s2">, </span><span class="s3">'123  '</span><span class="s2">],</span>
             <span class="s2">[</span><span class="s3">'051'</span><span class="s2">, </span><span class="s3">'efgg'</span><span class="s2">, </span><span class="s3">'tuv'</span><span class="s2">]], </span><span class="s1">np</span><span class="s2">.</span><span class="s1">str_</span><span class="s2">).</span><span class="s1">view</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">)</span>

<span class="s0">class </span><span class="s1">TestComparisonsMixed2</span><span class="s2">(</span><span class="s1">TestComparisons</span><span class="s2">):</span>
    <span class="s7">&quot;&quot;&quot;Ticket #1276&quot;&quot;&quot;</span>

    <span class="s0">def </span><span class="s1">setup_method</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">TestComparisons</span><span class="s2">.</span><span class="s1">setup_method</span><span class="s2">(</span><span class="s1">self</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">A </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">(</span>
            <span class="s2">[[</span><span class="s3">'abc'</span><span class="s2">, </span><span class="s3">'abcc'</span><span class="s2">, </span><span class="s3">'123'</span><span class="s2">],</span>
             <span class="s2">[</span><span class="s3">'789'</span><span class="s2">, </span><span class="s3">'abc'</span><span class="s2">, </span><span class="s3">'xyz'</span><span class="s2">]], </span><span class="s1">np</span><span class="s2">.</span><span class="s1">str_</span><span class="s2">).</span><span class="s1">view</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">)</span>

<span class="s0">class </span><span class="s1">TestInformation</span><span class="s2">:</span>
    <span class="s0">def </span><span class="s1">setup_method</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">A </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s3">' abc '</span><span class="s2">, </span><span class="s3">''</span><span class="s2">],</span>
                           <span class="s2">[</span><span class="s3">'12345'</span><span class="s2">, </span><span class="s3">'MixedCase'</span><span class="s2">],</span>
                           <span class="s2">[</span><span class="s3">'123 </span><span class="s0">\t </span><span class="s3">345 </span><span class="s0">\0 </span><span class="s3">'</span><span class="s2">, </span><span class="s3">'UPPER'</span><span class="s2">]]) </span><span class="s1">\</span>
                            <span class="s2">.</span><span class="s1">view</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">B </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s3">' </span><span class="s0">\u03a3 </span><span class="s3">'</span><span class="s2">, </span><span class="s3">''</span><span class="s2">],</span>
                           <span class="s2">[</span><span class="s3">'12345'</span><span class="s2">, </span><span class="s3">'MixedCase'</span><span class="s2">],</span>
                           <span class="s2">[</span><span class="s3">'123 </span><span class="s0">\t </span><span class="s3">345 </span><span class="s0">\0 </span><span class="s3">'</span><span class="s2">, </span><span class="s3">'UPPER'</span><span class="s2">]]) </span><span class="s1">\</span>
                            <span class="s2">.</span><span class="s1">view</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">)</span>
        <span class="s4"># Array with longer strings, &gt; MEMCHR_CUT_OFF in code.</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">C </span><span class="s2">= (</span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([</span><span class="s3">'ABCDEFGHIJKLMNOPQRSTUVWXYZ'</span><span class="s2">,</span>
                            <span class="s3">'01234567890123456789012345'</span><span class="s2">])</span>
                  <span class="s2">.</span><span class="s1">view</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">))</span>

    <span class="s0">def </span><span class="s1">test_len</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">str_len</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">).</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">integer</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">str_len</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">), [[</span><span class="s5">5</span><span class="s2">, </span><span class="s5">0</span><span class="s2">], [</span><span class="s5">5</span><span class="s2">, </span><span class="s5">9</span><span class="s2">], [</span><span class="s5">12</span><span class="s2">, </span><span class="s5">5</span><span class="s2">]])</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">str_len</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">), [[</span><span class="s5">3</span><span class="s2">, </span><span class="s5">0</span><span class="s2">], [</span><span class="s5">5</span><span class="s2">, </span><span class="s5">9</span><span class="s2">], [</span><span class="s5">12</span><span class="s2">, </span><span class="s5">5</span><span class="s2">]])</span>

    <span class="s0">def </span><span class="s1">test_count</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">count</span><span class="s2">(</span><span class="s3">''</span><span class="s2">).</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">integer</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">count</span><span class="s2">(</span><span class="s3">'a'</span><span class="s2">), [[</span><span class="s5">1</span><span class="s2">, </span><span class="s5">0</span><span class="s2">], [</span><span class="s5">0</span><span class="s2">, </span><span class="s5">1</span><span class="s2">], [</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">]])</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">count</span><span class="s2">(</span><span class="s3">'123'</span><span class="s2">), [[</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">], [</span><span class="s5">1</span><span class="s2">, </span><span class="s5">0</span><span class="s2">], [</span><span class="s5">1</span><span class="s2">, </span><span class="s5">0</span><span class="s2">]])</span>
        <span class="s4"># Python doesn't seem to like counting NULL characters</span>
        <span class="s4"># assert_array_equal(self.A.count('\0'), [[0, 0], [0, 0], [1, 0]])</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">count</span><span class="s2">(</span><span class="s3">'a'</span><span class="s2">, </span><span class="s5">0</span><span class="s2">, </span><span class="s5">2</span><span class="s2">), [[</span><span class="s5">1</span><span class="s2">, </span><span class="s5">0</span><span class="s2">], [</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">], [</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">]])</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">.</span><span class="s1">count</span><span class="s2">(</span><span class="s3">'a'</span><span class="s2">), [[</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">], [</span><span class="s5">0</span><span class="s2">, </span><span class="s5">1</span><span class="s2">], [</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">]])</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">.</span><span class="s1">count</span><span class="s2">(</span><span class="s3">'123'</span><span class="s2">), [[</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">], [</span><span class="s5">1</span><span class="s2">, </span><span class="s5">0</span><span class="s2">], [</span><span class="s5">1</span><span class="s2">, </span><span class="s5">0</span><span class="s2">]])</span>
        <span class="s4"># assert_array_equal(self.B.count('\0'), [[0, 0], [0, 0], [1, 0]])</span>

    <span class="s0">def </span><span class="s1">test_endswith</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">endswith</span><span class="s2">(</span><span class="s3">''</span><span class="s2">).</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bool</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">endswith</span><span class="s2">(</span><span class="s3">' '</span><span class="s2">), [[</span><span class="s5">1</span><span class="s2">, </span><span class="s5">0</span><span class="s2">], [</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">], [</span><span class="s5">1</span><span class="s2">, </span><span class="s5">0</span><span class="s2">]])</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">endswith</span><span class="s2">(</span><span class="s3">'3'</span><span class="s2">, </span><span class="s5">0</span><span class="s2">, </span><span class="s5">3</span><span class="s2">), [[</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">], [</span><span class="s5">1</span><span class="s2">, </span><span class="s5">0</span><span class="s2">], [</span><span class="s5">1</span><span class="s2">, </span><span class="s5">0</span><span class="s2">]])</span>

        <span class="s0">def </span><span class="s1">fail</span><span class="s2">():</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">endswith</span><span class="s2">(</span><span class="s3">'3'</span><span class="s2">, </span><span class="s3">'fdjk'</span><span class="s2">)</span>

        <span class="s1">assert_raises</span><span class="s2">(</span><span class="s1">TypeError</span><span class="s2">, </span><span class="s1">fail</span><span class="s2">)</span>

    <span class="s2">@</span><span class="s1">pytest</span><span class="s2">.</span><span class="s1">mark</span><span class="s2">.</span><span class="s1">parametrize</span><span class="s2">(</span>
        <span class="s3">&quot;dtype, encode&quot;</span><span class="s2">,</span>
        <span class="s2">[(</span><span class="s3">&quot;U&quot;</span><span class="s2">, </span><span class="s1">str</span><span class="s2">),</span>
         <span class="s2">(</span><span class="s3">&quot;S&quot;</span><span class="s2">, </span><span class="s0">lambda </span><span class="s1">x</span><span class="s2">: </span><span class="s1">x</span><span class="s2">.</span><span class="s1">encode</span><span class="s2">(</span><span class="s3">'ascii'</span><span class="s2">)),</span>
         <span class="s2">])</span>
    <span class="s0">def </span><span class="s1">test_find</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">dtype</span><span class="s2">, </span><span class="s1">encode</span><span class="s2">):</span>
        <span class="s1">A </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">astype</span><span class="s2">(</span><span class="s1">dtype</span><span class="s2">)</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">A</span><span class="s2">.</span><span class="s1">find</span><span class="s2">(</span><span class="s1">encode</span><span class="s2">(</span><span class="s3">'a'</span><span class="s2">)).</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">integer</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">A</span><span class="s2">.</span><span class="s1">find</span><span class="s2">(</span><span class="s1">encode</span><span class="s2">(</span><span class="s3">'a'</span><span class="s2">)),</span>
                           <span class="s2">[[</span><span class="s5">1</span><span class="s2">, -</span><span class="s5">1</span><span class="s2">], [-</span><span class="s5">1</span><span class="s2">, </span><span class="s5">6</span><span class="s2">], [-</span><span class="s5">1</span><span class="s2">, -</span><span class="s5">1</span><span class="s2">]])</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">A</span><span class="s2">.</span><span class="s1">find</span><span class="s2">(</span><span class="s1">encode</span><span class="s2">(</span><span class="s3">'3'</span><span class="s2">)),</span>
                           <span class="s2">[[-</span><span class="s5">1</span><span class="s2">, -</span><span class="s5">1</span><span class="s2">], [</span><span class="s5">2</span><span class="s2">, -</span><span class="s5">1</span><span class="s2">], [</span><span class="s5">2</span><span class="s2">, -</span><span class="s5">1</span><span class="s2">]])</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">A</span><span class="s2">.</span><span class="s1">find</span><span class="s2">(</span><span class="s1">encode</span><span class="s2">(</span><span class="s3">'a'</span><span class="s2">), </span><span class="s5">0</span><span class="s2">, </span><span class="s5">2</span><span class="s2">),</span>
                           <span class="s2">[[</span><span class="s5">1</span><span class="s2">, -</span><span class="s5">1</span><span class="s2">], [-</span><span class="s5">1</span><span class="s2">, -</span><span class="s5">1</span><span class="s2">], [-</span><span class="s5">1</span><span class="s2">, -</span><span class="s5">1</span><span class="s2">]])</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">A</span><span class="s2">.</span><span class="s1">find</span><span class="s2">([</span><span class="s1">encode</span><span class="s2">(</span><span class="s3">'1'</span><span class="s2">), </span><span class="s1">encode</span><span class="s2">(</span><span class="s3">'P'</span><span class="s2">)]),</span>
                           <span class="s2">[[-</span><span class="s5">1</span><span class="s2">, -</span><span class="s5">1</span><span class="s2">], [</span><span class="s5">0</span><span class="s2">, -</span><span class="s5">1</span><span class="s2">], [</span><span class="s5">0</span><span class="s2">, </span><span class="s5">1</span><span class="s2">]])</span>
        <span class="s1">C </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">C</span><span class="s2">.</span><span class="s1">astype</span><span class="s2">(</span><span class="s1">dtype</span><span class="s2">)</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">C</span><span class="s2">.</span><span class="s1">find</span><span class="s2">(</span><span class="s1">encode</span><span class="s2">(</span><span class="s3">'M'</span><span class="s2">)), [</span><span class="s5">12</span><span class="s2">, -</span><span class="s5">1</span><span class="s2">])</span>

    <span class="s0">def </span><span class="s1">test_index</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>

        <span class="s0">def </span><span class="s1">fail</span><span class="s2">():</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">index</span><span class="s2">(</span><span class="s3">'a'</span><span class="s2">)</span>

        <span class="s1">assert_raises</span><span class="s2">(</span><span class="s1">ValueError</span><span class="s2">, </span><span class="s1">fail</span><span class="s2">)</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">index</span><span class="s2">(</span><span class="s3">'abcba'</span><span class="s2">, </span><span class="s3">'b'</span><span class="s2">) == </span><span class="s5">1</span><span class="s2">)</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">index</span><span class="s2">(</span><span class="s3">'abcba'</span><span class="s2">, </span><span class="s3">'b'</span><span class="s2">).</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">integer</span><span class="s2">))</span>

    <span class="s0">def </span><span class="s1">test_isalnum</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">isalnum</span><span class="s2">().</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bool</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">isalnum</span><span class="s2">(), [[</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">], [</span><span class="s0">True</span><span class="s2">, </span><span class="s0">True</span><span class="s2">], [</span><span class="s0">False</span><span class="s2">, </span><span class="s0">True</span><span class="s2">]])</span>

    <span class="s0">def </span><span class="s1">test_isalpha</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">isalpha</span><span class="s2">().</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bool</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">isalpha</span><span class="s2">(), [[</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">], [</span><span class="s0">False</span><span class="s2">, </span><span class="s0">True</span><span class="s2">], [</span><span class="s0">False</span><span class="s2">, </span><span class="s0">True</span><span class="s2">]])</span>

    <span class="s0">def </span><span class="s1">test_isdigit</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">isdigit</span><span class="s2">().</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bool</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">isdigit</span><span class="s2">(), [[</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">], [</span><span class="s0">True</span><span class="s2">, </span><span class="s0">False</span><span class="s2">], [</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">]])</span>

    <span class="s0">def </span><span class="s1">test_islower</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">islower</span><span class="s2">().</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bool</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">islower</span><span class="s2">(), [[</span><span class="s0">True</span><span class="s2">, </span><span class="s0">False</span><span class="s2">], [</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">], [</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">]])</span>

    <span class="s0">def </span><span class="s1">test_isspace</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">isspace</span><span class="s2">().</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bool</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">isspace</span><span class="s2">(), [[</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">], [</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">], [</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">]])</span>

    <span class="s0">def </span><span class="s1">test_istitle</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">istitle</span><span class="s2">().</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bool</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">istitle</span><span class="s2">(), [[</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">], [</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">], [</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">]])</span>

    <span class="s0">def </span><span class="s1">test_isupper</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">isupper</span><span class="s2">().</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bool</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">isupper</span><span class="s2">(), [[</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">], [</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">], [</span><span class="s0">False</span><span class="s2">, </span><span class="s0">True</span><span class="s2">]])</span>

    <span class="s0">def </span><span class="s1">test_rfind</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">rfind</span><span class="s2">(</span><span class="s3">'a'</span><span class="s2">).</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">integer</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">rfind</span><span class="s2">(</span><span class="s3">'a'</span><span class="s2">), [[</span><span class="s5">1</span><span class="s2">, -</span><span class="s5">1</span><span class="s2">], [-</span><span class="s5">1</span><span class="s2">, </span><span class="s5">6</span><span class="s2">], [-</span><span class="s5">1</span><span class="s2">, -</span><span class="s5">1</span><span class="s2">]])</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">rfind</span><span class="s2">(</span><span class="s3">'3'</span><span class="s2">), [[-</span><span class="s5">1</span><span class="s2">, -</span><span class="s5">1</span><span class="s2">], [</span><span class="s5">2</span><span class="s2">, -</span><span class="s5">1</span><span class="s2">], [</span><span class="s5">6</span><span class="s2">, -</span><span class="s5">1</span><span class="s2">]])</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">rfind</span><span class="s2">(</span><span class="s3">'a'</span><span class="s2">, </span><span class="s5">0</span><span class="s2">, </span><span class="s5">2</span><span class="s2">), [[</span><span class="s5">1</span><span class="s2">, -</span><span class="s5">1</span><span class="s2">], [-</span><span class="s5">1</span><span class="s2">, -</span><span class="s5">1</span><span class="s2">], [-</span><span class="s5">1</span><span class="s2">, -</span><span class="s5">1</span><span class="s2">]])</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">rfind</span><span class="s2">([</span><span class="s3">'1'</span><span class="s2">, </span><span class="s3">'P'</span><span class="s2">]), [[-</span><span class="s5">1</span><span class="s2">, -</span><span class="s5">1</span><span class="s2">], [</span><span class="s5">0</span><span class="s2">, -</span><span class="s5">1</span><span class="s2">], [</span><span class="s5">0</span><span class="s2">, </span><span class="s5">2</span><span class="s2">]])</span>

    <span class="s0">def </span><span class="s1">test_rindex</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>

        <span class="s0">def </span><span class="s1">fail</span><span class="s2">():</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">rindex</span><span class="s2">(</span><span class="s3">'a'</span><span class="s2">)</span>

        <span class="s1">assert_raises</span><span class="s2">(</span><span class="s1">ValueError</span><span class="s2">, </span><span class="s1">fail</span><span class="s2">)</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">rindex</span><span class="s2">(</span><span class="s3">'abcba'</span><span class="s2">, </span><span class="s3">'b'</span><span class="s2">) == </span><span class="s5">3</span><span class="s2">)</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">rindex</span><span class="s2">(</span><span class="s3">'abcba'</span><span class="s2">, </span><span class="s3">'b'</span><span class="s2">).</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">integer</span><span class="s2">))</span>

    <span class="s0">def </span><span class="s1">test_startswith</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">startswith</span><span class="s2">(</span><span class="s3">''</span><span class="s2">).</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bool</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">startswith</span><span class="s2">(</span><span class="s3">' '</span><span class="s2">), [[</span><span class="s5">1</span><span class="s2">, </span><span class="s5">0</span><span class="s2">], [</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">], [</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">]])</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">startswith</span><span class="s2">(</span><span class="s3">'1'</span><span class="s2">, </span><span class="s5">0</span><span class="s2">, </span><span class="s5">3</span><span class="s2">), [[</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">], [</span><span class="s5">1</span><span class="s2">, </span><span class="s5">0</span><span class="s2">], [</span><span class="s5">1</span><span class="s2">, </span><span class="s5">0</span><span class="s2">]])</span>

        <span class="s0">def </span><span class="s1">fail</span><span class="s2">():</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">startswith</span><span class="s2">(</span><span class="s3">'3'</span><span class="s2">, </span><span class="s3">'fdjk'</span><span class="s2">)</span>

        <span class="s1">assert_raises</span><span class="s2">(</span><span class="s1">TypeError</span><span class="s2">, </span><span class="s1">fail</span><span class="s2">)</span>


<span class="s0">class </span><span class="s1">TestMethods</span><span class="s2">:</span>
    <span class="s0">def </span><span class="s1">setup_method</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">A </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s3">' abc '</span><span class="s2">, </span><span class="s3">''</span><span class="s2">],</span>
                           <span class="s2">[</span><span class="s3">'12345'</span><span class="s2">, </span><span class="s3">'MixedCase'</span><span class="s2">],</span>
                           <span class="s2">[</span><span class="s3">'123 </span><span class="s0">\t </span><span class="s3">345 </span><span class="s0">\0 </span><span class="s3">'</span><span class="s2">, </span><span class="s3">'UPPER'</span><span class="s2">]],</span>
                          <span class="s1">dtype</span><span class="s2">=</span><span class="s3">'S'</span><span class="s2">).</span><span class="s1">view</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">B </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s3">' </span><span class="s0">\u03a3 </span><span class="s3">'</span><span class="s2">, </span><span class="s3">''</span><span class="s2">],</span>
                           <span class="s2">[</span><span class="s3">'12345'</span><span class="s2">, </span><span class="s3">'MixedCase'</span><span class="s2">],</span>
                           <span class="s2">[</span><span class="s3">'123 </span><span class="s0">\t </span><span class="s3">345 </span><span class="s0">\0 </span><span class="s3">'</span><span class="s2">, </span><span class="s3">'UPPER'</span><span class="s2">]]).</span><span class="s1">view</span><span class="s2">(</span>
                                                            <span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_capitalize</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">tgt </span><span class="s2">= [[</span><span class="s6">b' abc '</span><span class="s2">, </span><span class="s6">b''</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'12345'</span><span class="s2">, </span><span class="s6">b'Mixedcase'</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'123 </span><span class="s0">\t </span><span class="s6">345 </span><span class="s0">\0 </span><span class="s6">'</span><span class="s2">, </span><span class="s6">b'Upper'</span><span class="s2">]]</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">capitalize</span><span class="s2">().</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bytes_</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">capitalize</span><span class="s2">(), </span><span class="s1">tgt</span><span class="s2">)</span>

        <span class="s1">tgt </span><span class="s2">= [[</span><span class="s3">' </span><span class="s0">\u03c3 </span><span class="s3">'</span><span class="s2">, </span><span class="s3">''</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s3">'12345'</span><span class="s2">, </span><span class="s3">'Mixedcase'</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s3">'123 </span><span class="s0">\t </span><span class="s3">345 </span><span class="s0">\0 </span><span class="s3">'</span><span class="s2">, </span><span class="s3">'Upper'</span><span class="s2">]]</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">.</span><span class="s1">capitalize</span><span class="s2">().</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">str_</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">.</span><span class="s1">capitalize</span><span class="s2">(), </span><span class="s1">tgt</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_center</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">center</span><span class="s2">(</span><span class="s5">10</span><span class="s2">).</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bytes_</span><span class="s2">))</span>
        <span class="s1">C </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">center</span><span class="s2">([</span><span class="s5">10</span><span class="s2">, </span><span class="s5">20</span><span class="s2">])</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">str_len</span><span class="s2">(</span><span class="s1">C</span><span class="s2">), [[</span><span class="s5">10</span><span class="s2">, </span><span class="s5">20</span><span class="s2">], [</span><span class="s5">10</span><span class="s2">, </span><span class="s5">20</span><span class="s2">], [</span><span class="s5">12</span><span class="s2">, </span><span class="s5">20</span><span class="s2">]])</span>

        <span class="s1">C </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">center</span><span class="s2">(</span><span class="s5">20</span><span class="s2">, </span><span class="s6">b'#'</span><span class="s2">)</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">all</span><span class="s2">(</span><span class="s1">C</span><span class="s2">.</span><span class="s1">startswith</span><span class="s2">(</span><span class="s6">b'#'</span><span class="s2">)))</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">all</span><span class="s2">(</span><span class="s1">C</span><span class="s2">.</span><span class="s1">endswith</span><span class="s2">(</span><span class="s6">b'#'</span><span class="s2">)))</span>

        <span class="s1">C </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">center</span><span class="s2">(</span><span class="s6">b'FOO'</span><span class="s2">, [[</span><span class="s5">10</span><span class="s2">, </span><span class="s5">20</span><span class="s2">], [</span><span class="s5">15</span><span class="s2">, </span><span class="s5">8</span><span class="s2">]])</span>
        <span class="s1">tgt </span><span class="s2">= [[</span><span class="s6">b'   FOO    '</span><span class="s2">, </span><span class="s6">b'        FOO         '</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'      FOO      '</span><span class="s2">, </span><span class="s6">b'  FOO   '</span><span class="s2">]]</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">C</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bytes_</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">C</span><span class="s2">, </span><span class="s1">tgt</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_decode</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">A </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([</span><span class="s6">b'</span><span class="s0">\\</span><span class="s6">u03a3'</span><span class="s2">])</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">A</span><span class="s2">.</span><span class="s1">decode</span><span class="s2">(</span><span class="s3">'unicode-escape'</span><span class="s2">)[</span><span class="s5">0</span><span class="s2">] == </span><span class="s3">'</span><span class="s0">\u03a3</span><span class="s3">'</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_encode</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">B </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">.</span><span class="s1">encode</span><span class="s2">(</span><span class="s3">'unicode_escape'</span><span class="s2">)</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">B</span><span class="s2">[</span><span class="s5">0</span><span class="s2">][</span><span class="s5">0</span><span class="s2">] == </span><span class="s1">str</span><span class="s2">(</span><span class="s3">' </span><span class="s0">\\</span><span class="s3">u03a3 '</span><span class="s2">).</span><span class="s1">encode</span><span class="s2">(</span><span class="s3">'latin1'</span><span class="s2">))</span>

    <span class="s0">def </span><span class="s1">test_expandtabs</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">T </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">expandtabs</span><span class="s2">()</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">T</span><span class="s2">[</span><span class="s5">2</span><span class="s2">, </span><span class="s5">0</span><span class="s2">] == </span><span class="s6">b'123      345 </span><span class="s0">\0</span><span class="s6">'</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_join</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s4"># NOTE: list(b'123') == [49, 50, 51]</span>
        <span class="s4">#       so that b','.join(b'123') results to an error on Py3</span>
        <span class="s1">A0 </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">decode</span><span class="s2">(</span><span class="s3">'ascii'</span><span class="s2">)</span>

        <span class="s1">A </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">join</span><span class="s2">([</span><span class="s3">','</span><span class="s2">, </span><span class="s3">'#'</span><span class="s2">], </span><span class="s1">A0</span><span class="s2">)</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">A</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">str_</span><span class="s2">))</span>
        <span class="s1">tgt </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s3">' ,a,b,c, '</span><span class="s2">, </span><span class="s3">''</span><span class="s2">],</span>
                        <span class="s2">[</span><span class="s3">'1,2,3,4,5'</span><span class="s2">, </span><span class="s3">'M#i#x#e#d#C#a#s#e'</span><span class="s2">],</span>
                        <span class="s2">[</span><span class="s3">'1,2,3, ,</span><span class="s0">\t</span><span class="s3">, ,3,4,5, ,</span><span class="s0">\x00</span><span class="s3">, '</span><span class="s2">, </span><span class="s3">'U#P#P#E#R'</span><span class="s2">]])</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">join</span><span class="s2">([</span><span class="s3">','</span><span class="s2">, </span><span class="s3">'#'</span><span class="s2">], </span><span class="s1">A0</span><span class="s2">), </span><span class="s1">tgt</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_ljust</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">ljust</span><span class="s2">(</span><span class="s5">10</span><span class="s2">).</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bytes_</span><span class="s2">))</span>

        <span class="s1">C </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">ljust</span><span class="s2">([</span><span class="s5">10</span><span class="s2">, </span><span class="s5">20</span><span class="s2">])</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">str_len</span><span class="s2">(</span><span class="s1">C</span><span class="s2">), [[</span><span class="s5">10</span><span class="s2">, </span><span class="s5">20</span><span class="s2">], [</span><span class="s5">10</span><span class="s2">, </span><span class="s5">20</span><span class="s2">], [</span><span class="s5">12</span><span class="s2">, </span><span class="s5">20</span><span class="s2">]])</span>

        <span class="s1">C </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">ljust</span><span class="s2">(</span><span class="s5">20</span><span class="s2">, </span><span class="s6">b'#'</span><span class="s2">)</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">C</span><span class="s2">.</span><span class="s1">startswith</span><span class="s2">(</span><span class="s6">b'#'</span><span class="s2">), [</span>
                <span class="s2">[</span><span class="s0">False</span><span class="s2">, </span><span class="s0">True</span><span class="s2">], [</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">], [</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">]])</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">all</span><span class="s2">(</span><span class="s1">C</span><span class="s2">.</span><span class="s1">endswith</span><span class="s2">(</span><span class="s6">b'#'</span><span class="s2">)))</span>

        <span class="s1">C </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">ljust</span><span class="s2">(</span><span class="s6">b'FOO'</span><span class="s2">, [[</span><span class="s5">10</span><span class="s2">, </span><span class="s5">20</span><span class="s2">], [</span><span class="s5">15</span><span class="s2">, </span><span class="s5">8</span><span class="s2">]])</span>
        <span class="s1">tgt </span><span class="s2">= [[</span><span class="s6">b'FOO       '</span><span class="s2">, </span><span class="s6">b'FOO                 '</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'FOO            '</span><span class="s2">, </span><span class="s6">b'FOO     '</span><span class="s2">]]</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">C</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bytes_</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">C</span><span class="s2">, </span><span class="s1">tgt</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_lower</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">tgt </span><span class="s2">= [[</span><span class="s6">b' abc '</span><span class="s2">, </span><span class="s6">b''</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'12345'</span><span class="s2">, </span><span class="s6">b'mixedcase'</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'123 </span><span class="s0">\t </span><span class="s6">345 </span><span class="s0">\0 </span><span class="s6">'</span><span class="s2">, </span><span class="s6">b'upper'</span><span class="s2">]]</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">lower</span><span class="s2">().</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bytes_</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">lower</span><span class="s2">(), </span><span class="s1">tgt</span><span class="s2">)</span>

        <span class="s1">tgt </span><span class="s2">= [[</span><span class="s3">' </span><span class="s0">\u03c3 </span><span class="s3">'</span><span class="s2">, </span><span class="s3">''</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s3">'12345'</span><span class="s2">, </span><span class="s3">'mixedcase'</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s3">'123 </span><span class="s0">\t </span><span class="s3">345 </span><span class="s0">\0 </span><span class="s3">'</span><span class="s2">, </span><span class="s3">'upper'</span><span class="s2">]]</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">.</span><span class="s1">lower</span><span class="s2">().</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">str_</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">.</span><span class="s1">lower</span><span class="s2">(), </span><span class="s1">tgt</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_lstrip</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">tgt </span><span class="s2">= [[</span><span class="s6">b'abc '</span><span class="s2">, </span><span class="s6">b''</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'12345'</span><span class="s2">, </span><span class="s6">b'MixedCase'</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'123 </span><span class="s0">\t </span><span class="s6">345 </span><span class="s0">\0 </span><span class="s6">'</span><span class="s2">, </span><span class="s6">b'UPPER'</span><span class="s2">]]</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">lstrip</span><span class="s2">().</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bytes_</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">lstrip</span><span class="s2">(), </span><span class="s1">tgt</span><span class="s2">)</span>

        <span class="s1">tgt </span><span class="s2">= [[</span><span class="s6">b' abc'</span><span class="s2">, </span><span class="s6">b''</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'2345'</span><span class="s2">, </span><span class="s6">b'ixedCase'</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'23 </span><span class="s0">\t </span><span class="s6">345 </span><span class="s0">\x00</span><span class="s6">'</span><span class="s2">, </span><span class="s6">b'UPPER'</span><span class="s2">]]</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">lstrip</span><span class="s2">([</span><span class="s6">b'1'</span><span class="s2">, </span><span class="s6">b'M'</span><span class="s2">]), </span><span class="s1">tgt</span><span class="s2">)</span>

        <span class="s1">tgt </span><span class="s2">= [[</span><span class="s3">'</span><span class="s0">\u03a3 </span><span class="s3">'</span><span class="s2">, </span><span class="s3">''</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s3">'12345'</span><span class="s2">, </span><span class="s3">'MixedCase'</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s3">'123 </span><span class="s0">\t </span><span class="s3">345 </span><span class="s0">\0 </span><span class="s3">'</span><span class="s2">, </span><span class="s3">'UPPER'</span><span class="s2">]]</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">.</span><span class="s1">lstrip</span><span class="s2">().</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">str_</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">.</span><span class="s1">lstrip</span><span class="s2">(), </span><span class="s1">tgt</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_partition</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">P </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">partition</span><span class="s2">([</span><span class="s6">b'3'</span><span class="s2">, </span><span class="s6">b'M'</span><span class="s2">])</span>
        <span class="s1">tgt </span><span class="s2">= [[(</span><span class="s6">b' abc '</span><span class="s2">, </span><span class="s6">b''</span><span class="s2">, </span><span class="s6">b''</span><span class="s2">), (</span><span class="s6">b''</span><span class="s2">, </span><span class="s6">b''</span><span class="s2">, </span><span class="s6">b''</span><span class="s2">)],</span>
               <span class="s2">[(</span><span class="s6">b'12'</span><span class="s2">, </span><span class="s6">b'3'</span><span class="s2">, </span><span class="s6">b'45'</span><span class="s2">), (</span><span class="s6">b''</span><span class="s2">, </span><span class="s6">b'M'</span><span class="s2">, </span><span class="s6">b'ixedCase'</span><span class="s2">)],</span>
               <span class="s2">[(</span><span class="s6">b'12'</span><span class="s2">, </span><span class="s6">b'3'</span><span class="s2">, </span><span class="s6">b' </span><span class="s0">\t </span><span class="s6">345 </span><span class="s0">\0 </span><span class="s6">'</span><span class="s2">), (</span><span class="s6">b'UPPER'</span><span class="s2">, </span><span class="s6">b''</span><span class="s2">, </span><span class="s6">b''</span><span class="s2">)]]</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">P</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bytes_</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">P</span><span class="s2">, </span><span class="s1">tgt</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_replace</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">R </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">([</span><span class="s6">b'3'</span><span class="s2">, </span><span class="s6">b'a'</span><span class="s2">],</span>
                           <span class="s2">[</span><span class="s6">b'##########'</span><span class="s2">, </span><span class="s6">b'@'</span><span class="s2">])</span>
        <span class="s1">tgt </span><span class="s2">= [[</span><span class="s6">b' abc '</span><span class="s2">, </span><span class="s6">b''</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'12##########45'</span><span class="s2">, </span><span class="s6">b'MixedC@se'</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'12########## </span><span class="s0">\t </span><span class="s6">##########45 </span><span class="s0">\x00 </span><span class="s6">'</span><span class="s2">, </span><span class="s6">b'UPPER'</span><span class="s2">]]</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bytes_</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">R</span><span class="s2">, </span><span class="s1">tgt</span><span class="s2">)</span>
        <span class="s4"># Test special cases that should just return the input array,</span>
        <span class="s4"># since replacements are not possible or do nothing.</span>
        <span class="s1">S1 </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s6">b'A very long byte string, longer than A'</span><span class="s2">, </span><span class="s6">b''</span><span class="s2">)</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">S1</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">)</span>
        <span class="s1">S2 </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s6">b''</span><span class="s2">, </span><span class="s6">b''</span><span class="s2">)</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">S2</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">)</span>
        <span class="s1">S3 </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s6">b'3'</span><span class="s2">, </span><span class="s6">b'3'</span><span class="s2">)</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">S3</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">)</span>
        <span class="s1">S4 </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s6">b'3'</span><span class="s2">, </span><span class="s6">b''</span><span class="s2">, </span><span class="s1">count</span><span class="s2">=</span><span class="s5">0</span><span class="s2">)</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">S4</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_replace_count_and_size</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">a </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([</span><span class="s3">'0123456789' </span><span class="s2">* </span><span class="s1">i </span><span class="s0">for </span><span class="s1">i </span><span class="s0">in </span><span class="s1">range</span><span class="s2">(</span><span class="s5">4</span><span class="s2">)]</span>
                     <span class="s2">).</span><span class="s1">view</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">)</span>
        <span class="s1">r1 </span><span class="s2">= </span><span class="s1">a</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s3">'5'</span><span class="s2">, </span><span class="s3">'ABCDE'</span><span class="s2">)</span>
        <span class="s0">assert </span><span class="s1">r1</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">itemsize </span><span class="s2">== (</span><span class="s5">3</span><span class="s2">*</span><span class="s5">10 </span><span class="s2">+ </span><span class="s5">3</span><span class="s2">*</span><span class="s5">4</span><span class="s2">) * </span><span class="s5">4</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">r1</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([</span><span class="s3">'01234ABCDE6789' </span><span class="s2">* </span><span class="s1">i</span>
                                         <span class="s0">for </span><span class="s1">i </span><span class="s0">in </span><span class="s1">range</span><span class="s2">(</span><span class="s5">4</span><span class="s2">)]))</span>
        <span class="s1">r2 </span><span class="s2">= </span><span class="s1">a</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s3">'5'</span><span class="s2">, </span><span class="s3">'ABCDE'</span><span class="s2">, </span><span class="s1">count</span><span class="s2">=</span><span class="s5">1</span><span class="s2">)</span>
        <span class="s0">assert </span><span class="s1">r2</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">itemsize </span><span class="s2">== (</span><span class="s5">3</span><span class="s2">*</span><span class="s5">10 </span><span class="s2">+ </span><span class="s5">4</span><span class="s2">) * </span><span class="s5">4</span>
        <span class="s1">r3 </span><span class="s2">= </span><span class="s1">a</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s3">'5'</span><span class="s2">, </span><span class="s3">'ABCDE'</span><span class="s2">, </span><span class="s1">count</span><span class="s2">=</span><span class="s5">0</span><span class="s2">)</span>
        <span class="s0">assert </span><span class="s1">r3</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">itemsize </span><span class="s2">== </span><span class="s1">a</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">itemsize</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">r3</span><span class="s2">, </span><span class="s1">a</span><span class="s2">)</span>
        <span class="s4"># Negative values mean to replace all.</span>
        <span class="s1">r4 </span><span class="s2">= </span><span class="s1">a</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s3">'5'</span><span class="s2">, </span><span class="s3">'ABCDE'</span><span class="s2">, </span><span class="s1">count</span><span class="s2">=-</span><span class="s5">1</span><span class="s2">)</span>
        <span class="s0">assert </span><span class="s1">r4</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">itemsize </span><span class="s2">== (</span><span class="s5">3</span><span class="s2">*</span><span class="s5">10 </span><span class="s2">+ </span><span class="s5">3</span><span class="s2">*</span><span class="s5">4</span><span class="s2">) * </span><span class="s5">4</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">r4</span><span class="s2">, </span><span class="s1">r1</span><span class="s2">)</span>
        <span class="s4"># We can do count on an element-by-element basis.</span>
        <span class="s1">r5 </span><span class="s2">= </span><span class="s1">a</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s3">'5'</span><span class="s2">, </span><span class="s3">'ABCDE'</span><span class="s2">, </span><span class="s1">count</span><span class="s2">=[-</span><span class="s5">1</span><span class="s2">, -</span><span class="s5">1</span><span class="s2">, -</span><span class="s5">1</span><span class="s2">, </span><span class="s5">1</span><span class="s2">])</span>
        <span class="s0">assert </span><span class="s1">r5</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">itemsize </span><span class="s2">== (</span><span class="s5">3</span><span class="s2">*</span><span class="s5">10 </span><span class="s2">+ </span><span class="s5">4</span><span class="s2">) * </span><span class="s5">4</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">r5</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">(</span>
            <span class="s2">[</span><span class="s3">'01234ABCDE6789' </span><span class="s2">* </span><span class="s1">i </span><span class="s0">for </span><span class="s1">i </span><span class="s0">in </span><span class="s1">range</span><span class="s2">(</span><span class="s5">3</span><span class="s2">)]</span>
            <span class="s2">+ [</span><span class="s3">'01234ABCDE6789' </span><span class="s2">+ </span><span class="s3">'0123456789' </span><span class="s2">* </span><span class="s5">2</span><span class="s2">]))</span>

    <span class="s0">def </span><span class="s1">test_replace_broadcasting</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">a </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">(</span><span class="s3">'0,0,0'</span><span class="s2">).</span><span class="s1">view</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">)</span>
        <span class="s1">r1 </span><span class="s2">= </span><span class="s1">a</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s3">'0'</span><span class="s2">, </span><span class="s3">'1'</span><span class="s2">, </span><span class="s1">count</span><span class="s2">=</span><span class="s1">np</span><span class="s2">.</span><span class="s1">arange</span><span class="s2">(</span><span class="s5">3</span><span class="s2">))</span>
        <span class="s0">assert </span><span class="s1">r1</span><span class="s2">.</span><span class="s1">dtype </span><span class="s2">== </span><span class="s1">a</span><span class="s2">.</span><span class="s1">dtype</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">r1</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([</span><span class="s3">'0,0,0'</span><span class="s2">, </span><span class="s3">'1,0,0'</span><span class="s2">, </span><span class="s3">'1,1,0'</span><span class="s2">]))</span>
        <span class="s1">r2 </span><span class="s2">= </span><span class="s1">a</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s3">'0'</span><span class="s2">, [[</span><span class="s3">'1'</span><span class="s2">], [</span><span class="s3">'2'</span><span class="s2">]], </span><span class="s1">count</span><span class="s2">=</span><span class="s1">np</span><span class="s2">.</span><span class="s1">arange</span><span class="s2">(</span><span class="s5">1</span><span class="s2">, </span><span class="s5">4</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">r2</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s3">'1,0,0'</span><span class="s2">, </span><span class="s3">'1,1,0'</span><span class="s2">, </span><span class="s3">'1,1,1'</span><span class="s2">],</span>
                                         <span class="s2">[</span><span class="s3">'2,0,0'</span><span class="s2">, </span><span class="s3">'2,2,0'</span><span class="s2">, </span><span class="s3">'2,2,2'</span><span class="s2">]]))</span>
        <span class="s1">r3 </span><span class="s2">= </span><span class="s1">a</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">([</span><span class="s3">'0'</span><span class="s2">, </span><span class="s3">'0,0'</span><span class="s2">, </span><span class="s3">'0,0,0'</span><span class="s2">], </span><span class="s3">'X'</span><span class="s2">)</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">r3</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([</span><span class="s3">'X,X,X'</span><span class="s2">, </span><span class="s3">'X,0'</span><span class="s2">, </span><span class="s3">'X'</span><span class="s2">]))</span>

    <span class="s0">def </span><span class="s1">test_rjust</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">rjust</span><span class="s2">(</span><span class="s5">10</span><span class="s2">).</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bytes_</span><span class="s2">))</span>

        <span class="s1">C </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">rjust</span><span class="s2">([</span><span class="s5">10</span><span class="s2">, </span><span class="s5">20</span><span class="s2">])</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">str_len</span><span class="s2">(</span><span class="s1">C</span><span class="s2">), [[</span><span class="s5">10</span><span class="s2">, </span><span class="s5">20</span><span class="s2">], [</span><span class="s5">10</span><span class="s2">, </span><span class="s5">20</span><span class="s2">], [</span><span class="s5">12</span><span class="s2">, </span><span class="s5">20</span><span class="s2">]])</span>

        <span class="s1">C </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">rjust</span><span class="s2">(</span><span class="s5">20</span><span class="s2">, </span><span class="s6">b'#'</span><span class="s2">)</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">all</span><span class="s2">(</span><span class="s1">C</span><span class="s2">.</span><span class="s1">startswith</span><span class="s2">(</span><span class="s6">b'#'</span><span class="s2">)))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">C</span><span class="s2">.</span><span class="s1">endswith</span><span class="s2">(</span><span class="s6">b'#'</span><span class="s2">),</span>
                           <span class="s2">[[</span><span class="s0">False</span><span class="s2">, </span><span class="s0">True</span><span class="s2">], [</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">], [</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">]])</span>

        <span class="s1">C </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">rjust</span><span class="s2">(</span><span class="s6">b'FOO'</span><span class="s2">, [[</span><span class="s5">10</span><span class="s2">, </span><span class="s5">20</span><span class="s2">], [</span><span class="s5">15</span><span class="s2">, </span><span class="s5">8</span><span class="s2">]])</span>
        <span class="s1">tgt </span><span class="s2">= [[</span><span class="s6">b'       FOO'</span><span class="s2">, </span><span class="s6">b'                 FOO'</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'            FOO'</span><span class="s2">, </span><span class="s6">b'     FOO'</span><span class="s2">]]</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">C</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bytes_</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">C</span><span class="s2">, </span><span class="s1">tgt</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_rpartition</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">P </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">rpartition</span><span class="s2">([</span><span class="s6">b'3'</span><span class="s2">, </span><span class="s6">b'M'</span><span class="s2">])</span>
        <span class="s1">tgt </span><span class="s2">= [[(</span><span class="s6">b''</span><span class="s2">, </span><span class="s6">b''</span><span class="s2">, </span><span class="s6">b' abc '</span><span class="s2">), (</span><span class="s6">b''</span><span class="s2">, </span><span class="s6">b''</span><span class="s2">, </span><span class="s6">b''</span><span class="s2">)],</span>
               <span class="s2">[(</span><span class="s6">b'12'</span><span class="s2">, </span><span class="s6">b'3'</span><span class="s2">, </span><span class="s6">b'45'</span><span class="s2">), (</span><span class="s6">b''</span><span class="s2">, </span><span class="s6">b'M'</span><span class="s2">, </span><span class="s6">b'ixedCase'</span><span class="s2">)],</span>
               <span class="s2">[(</span><span class="s6">b'123 </span><span class="s0">\t </span><span class="s6">'</span><span class="s2">, </span><span class="s6">b'3'</span><span class="s2">, </span><span class="s6">b'45 </span><span class="s0">\0 </span><span class="s6">'</span><span class="s2">), (</span><span class="s6">b''</span><span class="s2">, </span><span class="s6">b''</span><span class="s2">, </span><span class="s6">b'UPPER'</span><span class="s2">)]]</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">P</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bytes_</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">P</span><span class="s2">, </span><span class="s1">tgt</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_rsplit</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">A </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">rsplit</span><span class="s2">(</span><span class="s6">b'3'</span><span class="s2">)</span>
        <span class="s1">tgt </span><span class="s2">= [[[</span><span class="s6">b' abc '</span><span class="s2">], [</span><span class="s6">b''</span><span class="s2">]],</span>
               <span class="s2">[[</span><span class="s6">b'12'</span><span class="s2">, </span><span class="s6">b'45'</span><span class="s2">], [</span><span class="s6">b'MixedCase'</span><span class="s2">]],</span>
               <span class="s2">[[</span><span class="s6">b'12'</span><span class="s2">, </span><span class="s6">b' </span><span class="s0">\t </span><span class="s6">'</span><span class="s2">, </span><span class="s6">b'45 </span><span class="s0">\x00 </span><span class="s6">'</span><span class="s2">], [</span><span class="s6">b'UPPER'</span><span class="s2">]]]</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">A</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">object_</span><span class="s2">))</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">A</span><span class="s2">.</span><span class="s1">tolist</span><span class="s2">(), </span><span class="s1">tgt</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_rstrip</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">rstrip</span><span class="s2">().</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bytes_</span><span class="s2">))</span>

        <span class="s1">tgt </span><span class="s2">= [[</span><span class="s6">b' abc'</span><span class="s2">, </span><span class="s6">b''</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'12345'</span><span class="s2">, </span><span class="s6">b'MixedCase'</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'123 </span><span class="s0">\t </span><span class="s6">345'</span><span class="s2">, </span><span class="s6">b'UPPER'</span><span class="s2">]]</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">rstrip</span><span class="s2">(), </span><span class="s1">tgt</span><span class="s2">)</span>

        <span class="s1">tgt </span><span class="s2">= [[</span><span class="s6">b' abc '</span><span class="s2">, </span><span class="s6">b''</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'1234'</span><span class="s2">, </span><span class="s6">b'MixedCase'</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'123 </span><span class="s0">\t </span><span class="s6">345 </span><span class="s0">\x00</span><span class="s6">'</span><span class="s2">, </span><span class="s6">b'UPP'</span><span class="s2">]</span>
               <span class="s2">]</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">rstrip</span><span class="s2">([</span><span class="s6">b'5'</span><span class="s2">, </span><span class="s6">b'ER'</span><span class="s2">]), </span><span class="s1">tgt</span><span class="s2">)</span>

        <span class="s1">tgt </span><span class="s2">= [[</span><span class="s3">' </span><span class="s0">\u03a3</span><span class="s3">'</span><span class="s2">, </span><span class="s3">''</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s3">'12345'</span><span class="s2">, </span><span class="s3">'MixedCase'</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s3">'123 </span><span class="s0">\t </span><span class="s3">345'</span><span class="s2">, </span><span class="s3">'UPPER'</span><span class="s2">]]</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">.</span><span class="s1">rstrip</span><span class="s2">().</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">str_</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">.</span><span class="s1">rstrip</span><span class="s2">(), </span><span class="s1">tgt</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_strip</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">tgt </span><span class="s2">= [[</span><span class="s6">b'abc'</span><span class="s2">, </span><span class="s6">b''</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'12345'</span><span class="s2">, </span><span class="s6">b'MixedCase'</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'123 </span><span class="s0">\t </span><span class="s6">345'</span><span class="s2">, </span><span class="s6">b'UPPER'</span><span class="s2">]]</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">strip</span><span class="s2">().</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bytes_</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">strip</span><span class="s2">(), </span><span class="s1">tgt</span><span class="s2">)</span>

        <span class="s1">tgt </span><span class="s2">= [[</span><span class="s6">b' abc '</span><span class="s2">, </span><span class="s6">b''</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'234'</span><span class="s2">, </span><span class="s6">b'ixedCas'</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'23 </span><span class="s0">\t </span><span class="s6">345 </span><span class="s0">\x00</span><span class="s6">'</span><span class="s2">, </span><span class="s6">b'UPP'</span><span class="s2">]]</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">strip</span><span class="s2">([</span><span class="s6">b'15'</span><span class="s2">, </span><span class="s6">b'EReM'</span><span class="s2">]), </span><span class="s1">tgt</span><span class="s2">)</span>

        <span class="s1">tgt </span><span class="s2">= [[</span><span class="s3">'</span><span class="s0">\u03a3</span><span class="s3">'</span><span class="s2">, </span><span class="s3">''</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s3">'12345'</span><span class="s2">, </span><span class="s3">'MixedCase'</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s3">'123 </span><span class="s0">\t </span><span class="s3">345'</span><span class="s2">, </span><span class="s3">'UPPER'</span><span class="s2">]]</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">.</span><span class="s1">strip</span><span class="s2">().</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">str_</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">.</span><span class="s1">strip</span><span class="s2">(), </span><span class="s1">tgt</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_split</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">A </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">split</span><span class="s2">(</span><span class="s6">b'3'</span><span class="s2">)</span>
        <span class="s1">tgt </span><span class="s2">= [</span>
               <span class="s2">[[</span><span class="s6">b' abc '</span><span class="s2">], [</span><span class="s6">b''</span><span class="s2">]],</span>
               <span class="s2">[[</span><span class="s6">b'12'</span><span class="s2">, </span><span class="s6">b'45'</span><span class="s2">], [</span><span class="s6">b'MixedCase'</span><span class="s2">]],</span>
               <span class="s2">[[</span><span class="s6">b'12'</span><span class="s2">, </span><span class="s6">b' </span><span class="s0">\t </span><span class="s6">'</span><span class="s2">, </span><span class="s6">b'45 </span><span class="s0">\x00 </span><span class="s6">'</span><span class="s2">], [</span><span class="s6">b'UPPER'</span><span class="s2">]]]</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">A</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">object_</span><span class="s2">))</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">A</span><span class="s2">.</span><span class="s1">tolist</span><span class="s2">(), </span><span class="s1">tgt</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_splitlines</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">A </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([</span><span class="s3">'abc</span><span class="s0">\n</span><span class="s3">fds</span><span class="s0">\n</span><span class="s3">wer'</span><span class="s2">]).</span><span class="s1">splitlines</span><span class="s2">()</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">A</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">object_</span><span class="s2">))</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">A</span><span class="s2">.</span><span class="s1">shape </span><span class="s2">== (</span><span class="s5">1</span><span class="s2">,))</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">len</span><span class="s2">(</span><span class="s1">A</span><span class="s2">[</span><span class="s5">0</span><span class="s2">]) == </span><span class="s5">3</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_swapcase</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">tgt </span><span class="s2">= [[</span><span class="s6">b' ABC '</span><span class="s2">, </span><span class="s6">b''</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'12345'</span><span class="s2">, </span><span class="s6">b'mIXEDcASE'</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'123 </span><span class="s0">\t </span><span class="s6">345 </span><span class="s0">\0 </span><span class="s6">'</span><span class="s2">, </span><span class="s6">b'upper'</span><span class="s2">]]</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">swapcase</span><span class="s2">().</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bytes_</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">swapcase</span><span class="s2">(), </span><span class="s1">tgt</span><span class="s2">)</span>

        <span class="s1">tgt </span><span class="s2">= [[</span><span class="s3">' </span><span class="s0">\u03c3 </span><span class="s3">'</span><span class="s2">, </span><span class="s3">''</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s3">'12345'</span><span class="s2">, </span><span class="s3">'mIXEDcASE'</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s3">'123 </span><span class="s0">\t </span><span class="s3">345 </span><span class="s0">\0 </span><span class="s3">'</span><span class="s2">, </span><span class="s3">'upper'</span><span class="s2">]]</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">.</span><span class="s1">swapcase</span><span class="s2">().</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">str_</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">.</span><span class="s1">swapcase</span><span class="s2">(), </span><span class="s1">tgt</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_title</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">tgt </span><span class="s2">= [[</span><span class="s6">b' Abc '</span><span class="s2">, </span><span class="s6">b''</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'12345'</span><span class="s2">, </span><span class="s6">b'Mixedcase'</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'123 </span><span class="s0">\t </span><span class="s6">345 </span><span class="s0">\0 </span><span class="s6">'</span><span class="s2">, </span><span class="s6">b'Upper'</span><span class="s2">]]</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">title</span><span class="s2">().</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bytes_</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">title</span><span class="s2">(), </span><span class="s1">tgt</span><span class="s2">)</span>

        <span class="s1">tgt </span><span class="s2">= [[</span><span class="s3">' </span><span class="s0">\u03a3 </span><span class="s3">'</span><span class="s2">, </span><span class="s3">''</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s3">'12345'</span><span class="s2">, </span><span class="s3">'Mixedcase'</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s3">'123 </span><span class="s0">\t </span><span class="s3">345 </span><span class="s0">\0 </span><span class="s3">'</span><span class="s2">, </span><span class="s3">'Upper'</span><span class="s2">]]</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">.</span><span class="s1">title</span><span class="s2">().</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">str_</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">.</span><span class="s1">title</span><span class="s2">(), </span><span class="s1">tgt</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_upper</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">tgt </span><span class="s2">= [[</span><span class="s6">b' ABC '</span><span class="s2">, </span><span class="s6">b''</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'12345'</span><span class="s2">, </span><span class="s6">b'MIXEDCASE'</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'123 </span><span class="s0">\t </span><span class="s6">345 </span><span class="s0">\0 </span><span class="s6">'</span><span class="s2">, </span><span class="s6">b'UPPER'</span><span class="s2">]]</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">upper</span><span class="s2">().</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bytes_</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">upper</span><span class="s2">(), </span><span class="s1">tgt</span><span class="s2">)</span>

        <span class="s1">tgt </span><span class="s2">= [[</span><span class="s3">' </span><span class="s0">\u03a3 </span><span class="s3">'</span><span class="s2">, </span><span class="s3">''</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s3">'12345'</span><span class="s2">, </span><span class="s3">'MIXEDCASE'</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s3">'123 </span><span class="s0">\t </span><span class="s3">345 </span><span class="s0">\0 </span><span class="s3">'</span><span class="s2">, </span><span class="s3">'UPPER'</span><span class="s2">]]</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">.</span><span class="s1">upper</span><span class="s2">().</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">str_</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">.</span><span class="s1">upper</span><span class="s2">(), </span><span class="s1">tgt</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_isnumeric</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>

        <span class="s0">def </span><span class="s1">fail</span><span class="s2">():</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">isnumeric</span><span class="s2">()</span>

        <span class="s1">assert_raises</span><span class="s2">(</span><span class="s1">TypeError</span><span class="s2">, </span><span class="s1">fail</span><span class="s2">)</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">.</span><span class="s1">isnumeric</span><span class="s2">().</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bool</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">.</span><span class="s1">isnumeric</span><span class="s2">(), [</span>
                <span class="s2">[</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">], [</span><span class="s0">True</span><span class="s2">, </span><span class="s0">False</span><span class="s2">], [</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">]])</span>

    <span class="s0">def </span><span class="s1">test_isdecimal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>

        <span class="s0">def </span><span class="s1">fail</span><span class="s2">():</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">.</span><span class="s1">isdecimal</span><span class="s2">()</span>

        <span class="s1">assert_raises</span><span class="s2">(</span><span class="s1">TypeError</span><span class="s2">, </span><span class="s1">fail</span><span class="s2">)</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">issubclass</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">.</span><span class="s1">isdecimal</span><span class="s2">().</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">, </span><span class="s1">np</span><span class="s2">.</span><span class="s1">bool</span><span class="s2">))</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">.</span><span class="s1">isdecimal</span><span class="s2">(), [</span>
                <span class="s2">[</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">], [</span><span class="s0">True</span><span class="s2">, </span><span class="s0">False</span><span class="s2">], [</span><span class="s0">False</span><span class="s2">, </span><span class="s0">False</span><span class="s2">]])</span>


<span class="s0">class </span><span class="s1">TestOperations</span><span class="s2">:</span>
    <span class="s0">def </span><span class="s1">setup_method</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">A </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s3">'abc'</span><span class="s2">, </span><span class="s3">'123'</span><span class="s2">],</span>
                           <span class="s2">[</span><span class="s3">'789'</span><span class="s2">, </span><span class="s3">'xyz'</span><span class="s2">]]).</span><span class="s1">view</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">B </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s3">'efg'</span><span class="s2">, </span><span class="s3">'456'</span><span class="s2">],</span>
                           <span class="s2">[</span><span class="s3">'051'</span><span class="s2">, </span><span class="s3">'tuv'</span><span class="s2">]]).</span><span class="s1">view</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_add</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">AB </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s3">'abcefg'</span><span class="s2">, </span><span class="s3">'123456'</span><span class="s2">],</span>
                       <span class="s2">[</span><span class="s3">'789051'</span><span class="s2">, </span><span class="s3">'xyztuv'</span><span class="s2">]]).</span><span class="s1">view</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">)</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">AB</span><span class="s2">, (</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A </span><span class="s2">+ </span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">))</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">len</span><span class="s2">((</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A </span><span class="s2">+ </span><span class="s1">self</span><span class="s2">.</span><span class="s1">B</span><span class="s2">)[</span><span class="s5">0</span><span class="s2">][</span><span class="s5">0</span><span class="s2">]) == </span><span class="s5">6</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_radd</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">QA </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s3">'qabc'</span><span class="s2">, </span><span class="s3">'q123'</span><span class="s2">],</span>
                       <span class="s2">[</span><span class="s3">'q789'</span><span class="s2">, </span><span class="s3">'qxyz'</span><span class="s2">]]).</span><span class="s1">view</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">)</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">QA</span><span class="s2">, (</span><span class="s3">'q' </span><span class="s2">+ </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">))</span>

    <span class="s0">def </span><span class="s1">test_mul</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">A </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span>
        <span class="s0">for </span><span class="s1">r </span><span class="s0">in </span><span class="s2">(</span><span class="s5">2</span><span class="s2">, </span><span class="s5">3</span><span class="s2">, </span><span class="s5">5</span><span class="s2">, </span><span class="s5">7</span><span class="s2">, </span><span class="s5">197</span><span class="s2">):</span>
            <span class="s1">Ar </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s1">A</span><span class="s2">[</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">]*</span><span class="s1">r</span><span class="s2">, </span><span class="s1">A</span><span class="s2">[</span><span class="s5">0</span><span class="s2">, </span><span class="s5">1</span><span class="s2">]*</span><span class="s1">r</span><span class="s2">],</span>
                           <span class="s2">[</span><span class="s1">A</span><span class="s2">[</span><span class="s5">1</span><span class="s2">, </span><span class="s5">0</span><span class="s2">]*</span><span class="s1">r</span><span class="s2">, </span><span class="s1">A</span><span class="s2">[</span><span class="s5">1</span><span class="s2">, </span><span class="s5">1</span><span class="s2">]*</span><span class="s1">r</span><span class="s2">]]).</span><span class="s1">view</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">)</span>

            <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">Ar</span><span class="s2">, (</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A </span><span class="s2">* </span><span class="s1">r</span><span class="s2">))</span>

        <span class="s0">for </span><span class="s1">ob </span><span class="s0">in </span><span class="s2">[</span><span class="s1">object</span><span class="s2">(), </span><span class="s3">'qrs'</span><span class="s2">]:</span>
            <span class="s0">with </span><span class="s1">assert_raises_regex</span><span class="s2">(</span><span class="s1">ValueError</span><span class="s2">,</span>
                                     <span class="s3">'Can only multiply by integers'</span><span class="s2">):</span>
                <span class="s1">A</span><span class="s2">*</span><span class="s1">ob</span>

    <span class="s0">def </span><span class="s1">test_rmul</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">A </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span>
        <span class="s0">for </span><span class="s1">r </span><span class="s0">in </span><span class="s2">(</span><span class="s5">2</span><span class="s2">, </span><span class="s5">3</span><span class="s2">, </span><span class="s5">5</span><span class="s2">, </span><span class="s5">7</span><span class="s2">, </span><span class="s5">197</span><span class="s2">):</span>
            <span class="s1">Ar </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s1">A</span><span class="s2">[</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">]*</span><span class="s1">r</span><span class="s2">, </span><span class="s1">A</span><span class="s2">[</span><span class="s5">0</span><span class="s2">, </span><span class="s5">1</span><span class="s2">]*</span><span class="s1">r</span><span class="s2">],</span>
                           <span class="s2">[</span><span class="s1">A</span><span class="s2">[</span><span class="s5">1</span><span class="s2">, </span><span class="s5">0</span><span class="s2">]*</span><span class="s1">r</span><span class="s2">, </span><span class="s1">A</span><span class="s2">[</span><span class="s5">1</span><span class="s2">, </span><span class="s5">1</span><span class="s2">]*</span><span class="s1">r</span><span class="s2">]]).</span><span class="s1">view</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">)</span>
            <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">Ar</span><span class="s2">, (</span><span class="s1">r </span><span class="s2">* </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">))</span>

        <span class="s0">for </span><span class="s1">ob </span><span class="s0">in </span><span class="s2">[</span><span class="s1">object</span><span class="s2">(), </span><span class="s3">'qrs'</span><span class="s2">]:</span>
            <span class="s0">with </span><span class="s1">assert_raises_regex</span><span class="s2">(</span><span class="s1">ValueError</span><span class="s2">,</span>
                                     <span class="s3">'Can only multiply by integers'</span><span class="s2">):</span>
                <span class="s1">ob </span><span class="s2">* </span><span class="s1">A</span>

    <span class="s0">def </span><span class="s1">test_mod</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s7">&quot;&quot;&quot;Ticket #856&quot;&quot;&quot;</span>
        <span class="s1">F </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s3">'%d'</span><span class="s2">, </span><span class="s3">'%f'</span><span class="s2">], [</span><span class="s3">'%s'</span><span class="s2">, </span><span class="s3">'%r'</span><span class="s2">]]).</span><span class="s1">view</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">)</span>
        <span class="s1">C </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s5">3</span><span class="s2">, </span><span class="s5">7</span><span class="s2">], [</span><span class="s5">19</span><span class="s2">, </span><span class="s5">1</span><span class="s2">]], </span><span class="s1">dtype</span><span class="s2">=</span><span class="s1">np</span><span class="s2">.</span><span class="s1">int64</span><span class="s2">)</span>
        <span class="s1">FC </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s3">'3'</span><span class="s2">, </span><span class="s3">'7.000000'</span><span class="s2">],</span>
                       <span class="s2">[</span><span class="s3">'19'</span><span class="s2">, </span><span class="s3">'np.int64(1)'</span><span class="s2">]]).</span><span class="s1">view</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">)</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">FC</span><span class="s2">, </span><span class="s1">F </span><span class="s2">% </span><span class="s1">C</span><span class="s2">)</span>

        <span class="s1">A </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s3">'%.3f'</span><span class="s2">, </span><span class="s3">'%d'</span><span class="s2">], [</span><span class="s3">'%s'</span><span class="s2">, </span><span class="s3">'%r'</span><span class="s2">]]).</span><span class="s1">view</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">)</span>
        <span class="s1">A1 </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s3">'1.000'</span><span class="s2">, </span><span class="s3">'1'</span><span class="s2">],</span>
                       <span class="s2">[</span><span class="s3">'1'</span><span class="s2">, </span><span class="s1">repr</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">(</span><span class="s5">1</span><span class="s2">)[()])]]).</span><span class="s1">view</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">)</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">A1</span><span class="s2">, (</span><span class="s1">A </span><span class="s2">% </span><span class="s5">1</span><span class="s2">))</span>

        <span class="s1">A2 </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s3">'1.000'</span><span class="s2">, </span><span class="s3">'2'</span><span class="s2">],</span>
                       <span class="s2">[</span><span class="s3">'3'</span><span class="s2">, </span><span class="s1">repr</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">(</span><span class="s5">4</span><span class="s2">)[()])]]).</span><span class="s1">view</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">)</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">A2</span><span class="s2">, (</span><span class="s1">A </span><span class="s2">% [[</span><span class="s5">1</span><span class="s2">, </span><span class="s5">2</span><span class="s2">], [</span><span class="s5">3</span><span class="s2">, </span><span class="s5">4</span><span class="s2">]]))</span>

    <span class="s0">def </span><span class="s1">test_rmod</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_</span><span class="s2">((</span><span class="s3">&quot;%s&quot; </span><span class="s2">% </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">) == </span><span class="s1">str</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">))</span>
        <span class="s1">assert_</span><span class="s2">((</span><span class="s3">&quot;%r&quot; </span><span class="s2">% </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">) == </span><span class="s1">repr</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span><span class="s2">))</span>

        <span class="s0">for </span><span class="s1">ob </span><span class="s0">in </span><span class="s2">[</span><span class="s5">42</span><span class="s2">, </span><span class="s1">object</span><span class="s2">()]:</span>
            <span class="s0">with </span><span class="s1">assert_raises_regex</span><span class="s2">(</span>
                    <span class="s1">TypeError</span><span class="s2">, </span><span class="s3">&quot;unsupported operand type.* and 'chararray'&quot;</span><span class="s2">):</span>
                <span class="s1">ob </span><span class="s2">% </span><span class="s1">self</span><span class="s2">.</span><span class="s1">A</span>

    <span class="s0">def </span><span class="s1">test_slice</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s7">&quot;&quot;&quot;Regression test for https://github.com/numpy/numpy/issues/5982&quot;&quot;&quot;</span>

        <span class="s1">arr </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s3">'abc '</span><span class="s2">, </span><span class="s3">'def '</span><span class="s2">], [</span><span class="s3">'geh '</span><span class="s2">, </span><span class="s3">'ijk '</span><span class="s2">]],</span>
                       <span class="s1">dtype</span><span class="s2">=</span><span class="s3">'S4'</span><span class="s2">).</span><span class="s1">view</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">)</span>
        <span class="s1">sl1 </span><span class="s2">= </span><span class="s1">arr</span><span class="s2">[:]</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">sl1</span><span class="s2">, </span><span class="s1">arr</span><span class="s2">)</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">sl1</span><span class="s2">.</span><span class="s1">base </span><span class="s0">is </span><span class="s1">arr</span><span class="s2">)</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">sl1</span><span class="s2">.</span><span class="s1">base</span><span class="s2">.</span><span class="s1">base </span><span class="s0">is </span><span class="s1">arr</span><span class="s2">.</span><span class="s1">base</span><span class="s2">)</span>

        <span class="s1">sl2 </span><span class="s2">= </span><span class="s1">arr</span><span class="s2">[:, :]</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">sl2</span><span class="s2">, </span><span class="s1">arr</span><span class="s2">)</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">sl2</span><span class="s2">.</span><span class="s1">base </span><span class="s0">is </span><span class="s1">arr</span><span class="s2">)</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">sl2</span><span class="s2">.</span><span class="s1">base</span><span class="s2">.</span><span class="s1">base </span><span class="s0">is </span><span class="s1">arr</span><span class="s2">.</span><span class="s1">base</span><span class="s2">)</span>

        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">arr</span><span class="s2">[</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">] == </span><span class="s6">b'abc'</span><span class="s2">)</span>

    <span class="s2">@</span><span class="s1">pytest</span><span class="s2">.</span><span class="s1">mark</span><span class="s2">.</span><span class="s1">parametrize</span><span class="s2">(</span><span class="s3">'data'</span><span class="s2">, [[</span><span class="s3">'plate'</span><span class="s2">, </span><span class="s3">'   '</span><span class="s2">, </span><span class="s3">'shrimp'</span><span class="s2">],</span>
                                      <span class="s2">[</span><span class="s6">b'retro'</span><span class="s2">, </span><span class="s6">b'  '</span><span class="s2">, </span><span class="s6">b'encabulator'</span><span class="s2">]])</span>
    <span class="s0">def </span><span class="s1">test_getitem_length_zero_item</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">data</span><span class="s2">):</span>
        <span class="s4"># Regression test for gh-26375.</span>
        <span class="s1">a </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">array</span><span class="s2">(</span><span class="s1">data</span><span class="s2">)</span>
        <span class="s4"># a.dtype.type() will be an empty string or bytes instance.</span>
        <span class="s4"># The equality test will fail if a[1] has the wrong type</span>
        <span class="s4"># or does not have length 0.</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">a</span><span class="s2">[</span><span class="s5">1</span><span class="s2">], </span><span class="s1">a</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">type</span><span class="s2">())</span>


<span class="s0">class </span><span class="s1">TestMethodsEmptyArray</span><span class="s2">:</span>
    <span class="s0">def </span><span class="s1">setup_method</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">U </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([], </span><span class="s1">dtype</span><span class="s2">=</span><span class="s3">'U'</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">S </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([], </span><span class="s1">dtype</span><span class="s2">=</span><span class="s3">'S'</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_encode</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">res </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">encode</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">U</span><span class="s2">)</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">res</span><span class="s2">, [])</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">res</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">char </span><span class="s2">== </span><span class="s3">'S'</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_decode</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">res </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">decode</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">S</span><span class="s2">)</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">res</span><span class="s2">, [])</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">res</span><span class="s2">.</span><span class="s1">dtype</span><span class="s2">.</span><span class="s1">char </span><span class="s2">== </span><span class="s3">'U'</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_decode_with_reshape</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">res </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">decode</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">S</span><span class="s2">.</span><span class="s1">reshape</span><span class="s2">((</span><span class="s5">1</span><span class="s2">, </span><span class="s5">0</span><span class="s2">, </span><span class="s5">1</span><span class="s2">)))</span>
        <span class="s1">assert_</span><span class="s2">(</span><span class="s1">res</span><span class="s2">.</span><span class="s1">shape </span><span class="s2">== (</span><span class="s5">1</span><span class="s2">, </span><span class="s5">0</span><span class="s2">, </span><span class="s5">1</span><span class="s2">))</span>


<span class="s0">class </span><span class="s1">TestMethodsScalarValues</span><span class="s2">:</span>
    <span class="s0">def </span><span class="s1">test_mod</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">A </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([[</span><span class="s3">' abc '</span><span class="s2">, </span><span class="s3">''</span><span class="s2">],</span>
                      <span class="s2">[</span><span class="s3">'12345'</span><span class="s2">, </span><span class="s3">'MixedCase'</span><span class="s2">],</span>
                      <span class="s2">[</span><span class="s3">'123 </span><span class="s0">\t </span><span class="s3">345 </span><span class="s0">\0 </span><span class="s3">'</span><span class="s2">, </span><span class="s3">'UPPER'</span><span class="s2">]], </span><span class="s1">dtype</span><span class="s2">=</span><span class="s3">'S'</span><span class="s2">)</span>
        <span class="s1">tgt </span><span class="s2">= [[</span><span class="s6">b'123 abc '</span><span class="s2">, </span><span class="s6">b'123'</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'12312345'</span><span class="s2">, </span><span class="s6">b'123MixedCase'</span><span class="s2">],</span>
               <span class="s2">[</span><span class="s6">b'123123 </span><span class="s0">\t </span><span class="s6">345 </span><span class="s0">\0 </span><span class="s6">'</span><span class="s2">, </span><span class="s6">b'123UPPER'</span><span class="s2">]]</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">mod</span><span class="s2">(</span><span class="s6">b&quot;123%s&quot;</span><span class="s2">, </span><span class="s1">A</span><span class="s2">), </span><span class="s1">tgt</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_decode</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">bytestring </span><span class="s2">= </span><span class="s6">b'</span><span class="s0">\x81\xc1\x81\xc1\x81\xc1</span><span class="s6">'</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">decode</span><span class="s2">(</span><span class="s1">bytestring</span><span class="s2">, </span><span class="s1">encoding</span><span class="s2">=</span><span class="s3">'cp037'</span><span class="s2">),</span>
                     <span class="s3">'aAaAaA'</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_encode</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">unicode </span><span class="s2">= </span><span class="s3">'aAaAaA'</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">encode</span><span class="s2">(</span><span class="s1">unicode</span><span class="s2">, </span><span class="s1">encoding</span><span class="s2">=</span><span class="s3">'cp037'</span><span class="s2">),</span>
                     <span class="s6">b'</span><span class="s0">\x81\xc1\x81\xc1\x81\xc1</span><span class="s6">'</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_expandtabs</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">s </span><span class="s2">= </span><span class="s3">&quot;</span><span class="s0">\t</span><span class="s3">one level of indentation</span><span class="s0">\n\t\t</span><span class="s3">two levels of indentation&quot;</span>
        <span class="s1">assert_equal</span><span class="s2">(</span>
            <span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">expandtabs</span><span class="s2">(</span><span class="s1">s</span><span class="s2">, </span><span class="s1">tabsize</span><span class="s2">=</span><span class="s5">2</span><span class="s2">),</span>
            <span class="s3">&quot;  one level of indentation</span><span class="s0">\n    </span><span class="s3">two levels of indentation&quot;</span>
        <span class="s2">)</span>

    <span class="s0">def </span><span class="s1">test_join</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">seps </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">array</span><span class="s2">([</span><span class="s3">'-'</span><span class="s2">, </span><span class="s3">'_'</span><span class="s2">])</span>
        <span class="s1">assert_array_equal</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s1">seps</span><span class="s2">, </span><span class="s3">'hello'</span><span class="s2">),</span>
                           <span class="s2">[</span><span class="s3">'h-e-l-l-o'</span><span class="s2">, </span><span class="s3">'h_e_l_l_o'</span><span class="s2">])</span>

    <span class="s0">def </span><span class="s1">test_partition</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">partition</span><span class="s2">(</span><span class="s3">'This string'</span><span class="s2">, </span><span class="s3">' '</span><span class="s2">),</span>
                     <span class="s2">[</span><span class="s3">'This'</span><span class="s2">, </span><span class="s3">' '</span><span class="s2">, </span><span class="s3">'string'</span><span class="s2">])</span>

    <span class="s0">def </span><span class="s1">test_rpartition</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">rpartition</span><span class="s2">(</span><span class="s3">'This string here'</span><span class="s2">, </span><span class="s3">' '</span><span class="s2">),</span>
                     <span class="s2">[</span><span class="s3">'This string'</span><span class="s2">, </span><span class="s3">' '</span><span class="s2">, </span><span class="s3">'here'</span><span class="s2">])</span>

    <span class="s0">def </span><span class="s1">test_replace</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">assert_equal</span><span class="s2">(</span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s3">'Python is good'</span><span class="s2">, </span><span class="s3">'good'</span><span class="s2">, </span><span class="s3">'great'</span><span class="s2">),</span>
                     <span class="s3">'Python is great'</span><span class="s2">)</span>


<span class="s0">def </span><span class="s1">test_empty_indexing</span><span class="s2">():</span>
    <span class="s7">&quot;&quot;&quot;Regression test for ticket 1948.&quot;&quot;&quot;</span>
    <span class="s4"># Check that indexing a chararray with an empty list/array returns an</span>
    <span class="s4"># empty chararray instead of a chararray with a single empty string in it.</span>
    <span class="s1">s </span><span class="s2">= </span><span class="s1">np</span><span class="s2">.</span><span class="s1">char</span><span class="s2">.</span><span class="s1">chararray</span><span class="s2">((</span><span class="s5">4</span><span class="s2">,))</span>
    <span class="s1">assert_</span><span class="s2">(</span><span class="s1">s</span><span class="s2">[[]].</span><span class="s1">size </span><span class="s2">== </span><span class="s5">0</span><span class="s2">)</span>
</pre>
</body>
</html>