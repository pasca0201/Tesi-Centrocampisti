<html>
<head>
<title>markers.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #5f826b; font-style: italic;}
.s1 { color: #bcbec4;}
.s2 { color: #cf8e6d;}
.s3 { color: #bcbec4;}
.s4 { color: #7a7e85;}
.s5 { color: #2aacb8;}
.s6 { color: #6aab73;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
markers.py</font>
</center></td></tr></table>
<pre><span class="s0">r&quot;&quot;&quot; 
Functions to handle markers; used by the marker functionality of 
`~matplotlib.axes.Axes.plot`, `~matplotlib.axes.Axes.scatter`, and 
`~matplotlib.axes.Axes.errorbar`. 
 
All possible markers are defined here: 
 
============================== ====== ========================================= 
marker                         symbol description 
============================== ====== ========================================= 
``&quot;.&quot;``                        |m00|  point 
``&quot;,&quot;``                        |m01|  pixel 
``&quot;o&quot;``                        |m02|  circle 
``&quot;v&quot;``                        |m03|  triangle_down 
``&quot;^&quot;``                        |m04|  triangle_up 
``&quot;&lt;&quot;``                        |m05|  triangle_left 
``&quot;&gt;&quot;``                        |m06|  triangle_right 
``&quot;1&quot;``                        |m07|  tri_down 
``&quot;2&quot;``                        |m08|  tri_up 
``&quot;3&quot;``                        |m09|  tri_left 
``&quot;4&quot;``                        |m10|  tri_right 
``&quot;8&quot;``                        |m11|  octagon 
``&quot;s&quot;``                        |m12|  square 
``&quot;p&quot;``                        |m13|  pentagon 
``&quot;P&quot;``                        |m23|  plus (filled) 
``&quot;*&quot;``                        |m14|  star 
``&quot;h&quot;``                        |m15|  hexagon1 
``&quot;H&quot;``                        |m16|  hexagon2 
``&quot;+&quot;``                        |m17|  plus 
``&quot;x&quot;``                        |m18|  x 
``&quot;X&quot;``                        |m24|  x (filled) 
``&quot;D&quot;``                        |m19|  diamond 
``&quot;d&quot;``                        |m20|  thin_diamond 
``&quot;|&quot;``                        |m21|  vline 
``&quot;_&quot;``                        |m22|  hline 
``0`` (``TICKLEFT``)           |m25|  tickleft 
``1`` (``TICKRIGHT``)          |m26|  tickright 
``2`` (``TICKUP``)             |m27|  tickup 
``3`` (``TICKDOWN``)           |m28|  tickdown 
``4`` (``CARETLEFT``)          |m29|  caretleft 
``5`` (``CARETRIGHT``)         |m30|  caretright 
``6`` (``CARETUP``)            |m31|  caretup 
``7`` (``CARETDOWN``)          |m32|  caretdown 
``8`` (``CARETLEFTBASE``)      |m33|  caretleft (centered at base) 
``9`` (``CARETRIGHTBASE``)     |m34|  caretright (centered at base) 
``10`` (``CARETUPBASE``)       |m35|  caretup (centered at base) 
``11`` (``CARETDOWNBASE``)     |m36|  caretdown (centered at base) 
``&quot;none&quot;`` or ``&quot;None&quot;``              nothing 
``&quot; &quot;`` or  ``&quot;&quot;``                    nothing 
``&quot;$...$&quot;``                    |m37|  Render the string using mathtext. 
                                      E.g ``&quot;$f$&quot;`` for marker showing the 
                                      letter ``f``. 
``verts``                             A list of (x, y) pairs used for Path 
                                      vertices. The center of the marker is 
                                      located at (0, 0) and the size is 
                                      normalized, such that the created path 
                                      is encapsulated inside the unit cell. 
``path``                              A `~matplotlib.path.Path` instance. 
``(numsides, 0, angle)``              A regular polygon with ``numsides`` 
                                      sides, rotated by ``angle``. 
``(numsides, 1, angle)``              A star-like symbol with ``numsides`` 
                                      sides, rotated by ``angle``. 
``(numsides, 2, angle)``              An asterisk with ``numsides`` sides, 
                                      rotated by ``angle``. 
============================== ====== ========================================= 
 
Note that special symbols can be defined via the 
:ref:`STIX math font &lt;mathtext&gt;`, 
e.g. ``&quot;$\u266B$&quot;``. For an overview over the STIX font symbols refer to the 
`STIX font table &lt;http://www.stixfonts.org/allGlyphs.html&gt;`_. 
Also see the :doc:`/gallery/text_labels_and_annotations/stix_fonts_demo`. 
 
Integer numbers from ``0`` to ``11`` create lines and triangles. Those are 
equally accessible via capitalized variables, like ``CARETDOWNBASE``. 
Hence the following are equivalent:: 
 
    plt.plot([1, 2, 3], marker=11) 
    plt.plot([1, 2, 3], marker=matplotlib.markers.CARETDOWNBASE) 
 
Markers join and cap styles can be customized by creating a new instance of 
MarkerStyle. 
A MarkerStyle can also have a custom `~matplotlib.transforms.Transform` 
allowing it to be arbitrarily rotated or offset. 
 
Examples showing the use of markers: 
 
* :doc:`/gallery/lines_bars_and_markers/marker_reference` 
* :doc:`/gallery/lines_bars_and_markers/scatter_star_poly` 
* :doc:`/gallery/lines_bars_and_markers/multivariate_marker_plot` 
 
.. |m00| image:: /_static/markers/m00.png 
.. |m01| image:: /_static/markers/m01.png 
.. |m02| image:: /_static/markers/m02.png 
.. |m03| image:: /_static/markers/m03.png 
.. |m04| image:: /_static/markers/m04.png 
.. |m05| image:: /_static/markers/m05.png 
.. |m06| image:: /_static/markers/m06.png 
.. |m07| image:: /_static/markers/m07.png 
.. |m08| image:: /_static/markers/m08.png 
.. |m09| image:: /_static/markers/m09.png 
.. |m10| image:: /_static/markers/m10.png 
.. |m11| image:: /_static/markers/m11.png 
.. |m12| image:: /_static/markers/m12.png 
.. |m13| image:: /_static/markers/m13.png 
.. |m14| image:: /_static/markers/m14.png 
.. |m15| image:: /_static/markers/m15.png 
.. |m16| image:: /_static/markers/m16.png 
.. |m17| image:: /_static/markers/m17.png 
.. |m18| image:: /_static/markers/m18.png 
.. |m19| image:: /_static/markers/m19.png 
.. |m20| image:: /_static/markers/m20.png 
.. |m21| image:: /_static/markers/m21.png 
.. |m22| image:: /_static/markers/m22.png 
.. |m23| image:: /_static/markers/m23.png 
.. |m24| image:: /_static/markers/m24.png 
.. |m25| image:: /_static/markers/m25.png 
.. |m26| image:: /_static/markers/m26.png 
.. |m27| image:: /_static/markers/m27.png 
.. |m28| image:: /_static/markers/m28.png 
.. |m29| image:: /_static/markers/m29.png 
.. |m30| image:: /_static/markers/m30.png 
.. |m31| image:: /_static/markers/m31.png 
.. |m32| image:: /_static/markers/m32.png 
.. |m33| image:: /_static/markers/m33.png 
.. |m34| image:: /_static/markers/m34.png 
.. |m35| image:: /_static/markers/m35.png 
.. |m36| image:: /_static/markers/m36.png 
.. |m37| image:: /_static/markers/m37.png 
&quot;&quot;&quot;</span>
<span class="s2">import </span><span class="s1">copy</span>

<span class="s2">from </span><span class="s1">collections</span><span class="s3">.</span><span class="s1">abc </span><span class="s2">import </span><span class="s1">Sized</span>

<span class="s2">import </span><span class="s1">numpy </span><span class="s2">as </span><span class="s1">np</span>

<span class="s2">import </span><span class="s1">matplotlib </span><span class="s2">as </span><span class="s1">mpl</span>
<span class="s2">from </span><span class="s3">. </span><span class="s2">import </span><span class="s1">_api</span><span class="s3">, </span><span class="s1">cbook</span>
<span class="s2">from </span><span class="s3">.</span><span class="s1">path </span><span class="s2">import </span><span class="s1">Path</span>
<span class="s2">from </span><span class="s3">.</span><span class="s1">transforms </span><span class="s2">import </span><span class="s1">IdentityTransform</span><span class="s3">, </span><span class="s1">Affine2D</span>
<span class="s2">from </span><span class="s3">.</span><span class="s1">_enums </span><span class="s2">import </span><span class="s1">JoinStyle</span><span class="s3">, </span><span class="s1">CapStyle</span>

<span class="s4"># special-purpose marker identifiers:</span>
<span class="s3">(</span><span class="s1">TICKLEFT</span><span class="s3">, </span><span class="s1">TICKRIGHT</span><span class="s3">, </span><span class="s1">TICKUP</span><span class="s3">, </span><span class="s1">TICKDOWN</span><span class="s3">,</span>
 <span class="s1">CARETLEFT</span><span class="s3">, </span><span class="s1">CARETRIGHT</span><span class="s3">, </span><span class="s1">CARETUP</span><span class="s3">, </span><span class="s1">CARETDOWN</span><span class="s3">,</span>
 <span class="s1">CARETLEFTBASE</span><span class="s3">, </span><span class="s1">CARETRIGHTBASE</span><span class="s3">, </span><span class="s1">CARETUPBASE</span><span class="s3">, </span><span class="s1">CARETDOWNBASE</span><span class="s3">) = </span><span class="s1">range</span><span class="s3">(</span><span class="s5">12</span><span class="s3">)</span>

<span class="s1">_empty_path </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">(</span><span class="s1">np</span><span class="s3">.</span><span class="s1">empty</span><span class="s3">((</span><span class="s5">0</span><span class="s3">, </span><span class="s5">2</span><span class="s3">)))</span>


<span class="s2">class </span><span class="s1">MarkerStyle</span><span class="s3">:</span>
    <span class="s0">&quot;&quot;&quot; 
    A class representing marker types. 
 
    Instances are immutable. If you need to change anything, create a new 
    instance. 
 
    Attributes 
    ---------- 
    markers : dict 
        All known markers. 
    filled_markers : tuple 
        All known filled markers. This is a subset of *markers*. 
    fillstyles : tuple 
        The supported fillstyles. 
    &quot;&quot;&quot;</span>

    <span class="s1">markers </span><span class="s3">= {</span>
        <span class="s6">'.'</span><span class="s3">: </span><span class="s6">'point'</span><span class="s3">,</span>
        <span class="s6">','</span><span class="s3">: </span><span class="s6">'pixel'</span><span class="s3">,</span>
        <span class="s6">'o'</span><span class="s3">: </span><span class="s6">'circle'</span><span class="s3">,</span>
        <span class="s6">'v'</span><span class="s3">: </span><span class="s6">'triangle_down'</span><span class="s3">,</span>
        <span class="s6">'^'</span><span class="s3">: </span><span class="s6">'triangle_up'</span><span class="s3">,</span>
        <span class="s6">'&lt;'</span><span class="s3">: </span><span class="s6">'triangle_left'</span><span class="s3">,</span>
        <span class="s6">'&gt;'</span><span class="s3">: </span><span class="s6">'triangle_right'</span><span class="s3">,</span>
        <span class="s6">'1'</span><span class="s3">: </span><span class="s6">'tri_down'</span><span class="s3">,</span>
        <span class="s6">'2'</span><span class="s3">: </span><span class="s6">'tri_up'</span><span class="s3">,</span>
        <span class="s6">'3'</span><span class="s3">: </span><span class="s6">'tri_left'</span><span class="s3">,</span>
        <span class="s6">'4'</span><span class="s3">: </span><span class="s6">'tri_right'</span><span class="s3">,</span>
        <span class="s6">'8'</span><span class="s3">: </span><span class="s6">'octagon'</span><span class="s3">,</span>
        <span class="s6">'s'</span><span class="s3">: </span><span class="s6">'square'</span><span class="s3">,</span>
        <span class="s6">'p'</span><span class="s3">: </span><span class="s6">'pentagon'</span><span class="s3">,</span>
        <span class="s6">'*'</span><span class="s3">: </span><span class="s6">'star'</span><span class="s3">,</span>
        <span class="s6">'h'</span><span class="s3">: </span><span class="s6">'hexagon1'</span><span class="s3">,</span>
        <span class="s6">'H'</span><span class="s3">: </span><span class="s6">'hexagon2'</span><span class="s3">,</span>
        <span class="s6">'+'</span><span class="s3">: </span><span class="s6">'plus'</span><span class="s3">,</span>
        <span class="s6">'x'</span><span class="s3">: </span><span class="s6">'x'</span><span class="s3">,</span>
        <span class="s6">'D'</span><span class="s3">: </span><span class="s6">'diamond'</span><span class="s3">,</span>
        <span class="s6">'d'</span><span class="s3">: </span><span class="s6">'thin_diamond'</span><span class="s3">,</span>
        <span class="s6">'|'</span><span class="s3">: </span><span class="s6">'vline'</span><span class="s3">,</span>
        <span class="s6">'_'</span><span class="s3">: </span><span class="s6">'hline'</span><span class="s3">,</span>
        <span class="s6">'P'</span><span class="s3">: </span><span class="s6">'plus_filled'</span><span class="s3">,</span>
        <span class="s6">'X'</span><span class="s3">: </span><span class="s6">'x_filled'</span><span class="s3">,</span>
        <span class="s1">TICKLEFT</span><span class="s3">: </span><span class="s6">'tickleft'</span><span class="s3">,</span>
        <span class="s1">TICKRIGHT</span><span class="s3">: </span><span class="s6">'tickright'</span><span class="s3">,</span>
        <span class="s1">TICKUP</span><span class="s3">: </span><span class="s6">'tickup'</span><span class="s3">,</span>
        <span class="s1">TICKDOWN</span><span class="s3">: </span><span class="s6">'tickdown'</span><span class="s3">,</span>
        <span class="s1">CARETLEFT</span><span class="s3">: </span><span class="s6">'caretleft'</span><span class="s3">,</span>
        <span class="s1">CARETRIGHT</span><span class="s3">: </span><span class="s6">'caretright'</span><span class="s3">,</span>
        <span class="s1">CARETUP</span><span class="s3">: </span><span class="s6">'caretup'</span><span class="s3">,</span>
        <span class="s1">CARETDOWN</span><span class="s3">: </span><span class="s6">'caretdown'</span><span class="s3">,</span>
        <span class="s1">CARETLEFTBASE</span><span class="s3">: </span><span class="s6">'caretleftbase'</span><span class="s3">,</span>
        <span class="s1">CARETRIGHTBASE</span><span class="s3">: </span><span class="s6">'caretrightbase'</span><span class="s3">,</span>
        <span class="s1">CARETUPBASE</span><span class="s3">: </span><span class="s6">'caretupbase'</span><span class="s3">,</span>
        <span class="s1">CARETDOWNBASE</span><span class="s3">: </span><span class="s6">'caretdownbase'</span><span class="s3">,</span>
        <span class="s6">&quot;None&quot;</span><span class="s3">: </span><span class="s6">'nothing'</span><span class="s3">,</span>
        <span class="s6">&quot;none&quot;</span><span class="s3">: </span><span class="s6">'nothing'</span><span class="s3">,</span>
        <span class="s6">' '</span><span class="s3">: </span><span class="s6">'nothing'</span><span class="s3">,</span>
        <span class="s6">''</span><span class="s3">: </span><span class="s6">'nothing'</span>
    <span class="s3">}</span>

    <span class="s4"># Just used for informational purposes.  is_filled()</span>
    <span class="s4"># is calculated in the _set_* functions.</span>
    <span class="s1">filled_markers </span><span class="s3">= (</span>
        <span class="s6">'.'</span><span class="s3">, </span><span class="s6">'o'</span><span class="s3">, </span><span class="s6">'v'</span><span class="s3">, </span><span class="s6">'^'</span><span class="s3">, </span><span class="s6">'&lt;'</span><span class="s3">, </span><span class="s6">'&gt;'</span><span class="s3">, </span><span class="s6">'8'</span><span class="s3">, </span><span class="s6">'s'</span><span class="s3">, </span><span class="s6">'p'</span><span class="s3">, </span><span class="s6">'*'</span><span class="s3">, </span><span class="s6">'h'</span><span class="s3">, </span><span class="s6">'H'</span><span class="s3">, </span><span class="s6">'D'</span><span class="s3">, </span><span class="s6">'d'</span><span class="s3">,</span>
        <span class="s6">'P'</span><span class="s3">, </span><span class="s6">'X'</span><span class="s3">)</span>

    <span class="s1">fillstyles </span><span class="s3">= (</span><span class="s6">'full'</span><span class="s3">, </span><span class="s6">'left'</span><span class="s3">, </span><span class="s6">'right'</span><span class="s3">, </span><span class="s6">'bottom'</span><span class="s3">, </span><span class="s6">'top'</span><span class="s3">, </span><span class="s6">'none'</span><span class="s3">)</span>
    <span class="s1">_half_fillstyles </span><span class="s3">= (</span><span class="s6">'left'</span><span class="s3">, </span><span class="s6">'right'</span><span class="s3">, </span><span class="s6">'bottom'</span><span class="s3">, </span><span class="s6">'top'</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">__init__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">marker</span><span class="s3">,</span>
                 <span class="s1">fillstyle</span><span class="s3">=</span><span class="s2">None</span><span class="s3">, </span><span class="s1">transform</span><span class="s3">=</span><span class="s2">None</span><span class="s3">, </span><span class="s1">capstyle</span><span class="s3">=</span><span class="s2">None</span><span class="s3">, </span><span class="s1">joinstyle</span><span class="s3">=</span><span class="s2">None</span><span class="s3">):</span>
        <span class="s0">&quot;&quot;&quot; 
        Parameters 
        ---------- 
        marker : str, array-like, Path, MarkerStyle 
            - Another instance of `MarkerStyle` copies the details of that *marker*. 
            - For other possible marker values, see the module docstring 
              `matplotlib.markers`. 
 
        fillstyle : str, default: :rc:`markers.fillstyle` 
            One of 'full', 'left', 'right', 'bottom', 'top', 'none'. 
 
        transform : `~matplotlib.transforms.Transform`, optional 
            Transform that will be combined with the native transform of the 
            marker. 
 
        capstyle : `.CapStyle` or %(CapStyle)s, optional 
            Cap style that will override the default cap style of the marker. 
 
        joinstyle : `.JoinStyle` or %(JoinStyle)s, optional 
            Join style that will override the default join style of the marker. 
        &quot;&quot;&quot;</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_marker_function </span><span class="s3">= </span><span class="s2">None</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_user_transform </span><span class="s3">= </span><span class="s1">transform</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_user_capstyle </span><span class="s3">= </span><span class="s1">CapStyle</span><span class="s3">(</span><span class="s1">capstyle</span><span class="s3">) </span><span class="s2">if </span><span class="s1">capstyle </span><span class="s2">is not None else None</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_user_joinstyle </span><span class="s3">= </span><span class="s1">JoinStyle</span><span class="s3">(</span><span class="s1">joinstyle</span><span class="s3">) </span><span class="s2">if </span><span class="s1">joinstyle </span><span class="s2">is not None else None</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_set_fillstyle</span><span class="s3">(</span><span class="s1">fillstyle</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_set_marker</span><span class="s3">(</span><span class="s1">marker</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">_recache</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">if </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_marker_function </span><span class="s2">is None</span><span class="s3">:</span>
            <span class="s2">return</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">_empty_path</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">IdentityTransform</span><span class="s3">()</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_path </span><span class="s3">= </span><span class="s2">None</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_transform </span><span class="s3">= </span><span class="s2">None</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_snap_threshold </span><span class="s3">= </span><span class="s2">None</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_joinstyle </span><span class="s3">= </span><span class="s1">JoinStyle</span><span class="s3">.</span><span class="s1">round</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_capstyle </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_user_capstyle </span><span class="s2">or </span><span class="s1">CapStyle</span><span class="s3">.</span><span class="s1">butt</span>
        <span class="s4"># Initial guess: Assume the marker is filled unless the fillstyle is</span>
        <span class="s4"># set to 'none'. The marker function will override this for unfilled</span>
        <span class="s4"># markers.</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_filled </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_fillstyle </span><span class="s3">!= </span><span class="s6">'none'</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_marker_function</span><span class="s3">()</span>

    <span class="s2">def </span><span class="s1">__bool__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">bool</span><span class="s3">(</span><span class="s1">len</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_path</span><span class="s3">.</span><span class="s1">vertices</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">is_filled</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_filled</span>

    <span class="s2">def </span><span class="s1">get_fillstyle</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_fillstyle</span>

    <span class="s2">def </span><span class="s1">_set_fillstyle</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">fillstyle</span><span class="s3">):</span>
        <span class="s0">&quot;&quot;&quot; 
        Set the fillstyle. 
 
        Parameters 
        ---------- 
        fillstyle : {'full', 'left', 'right', 'bottom', 'top', 'none'} 
            The part of the marker surface that is colored with 
            markerfacecolor. 
        &quot;&quot;&quot;</span>
        <span class="s2">if </span><span class="s1">fillstyle </span><span class="s2">is None</span><span class="s3">:</span>
            <span class="s1">fillstyle </span><span class="s3">= </span><span class="s1">mpl</span><span class="s3">.</span><span class="s1">rcParams</span><span class="s3">[</span><span class="s6">'markers.fillstyle'</span><span class="s3">]</span>
        <span class="s1">_api</span><span class="s3">.</span><span class="s1">check_in_list</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">fillstyles</span><span class="s3">, </span><span class="s1">fillstyle</span><span class="s3">=</span><span class="s1">fillstyle</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_fillstyle </span><span class="s3">= </span><span class="s1">fillstyle</span>

    <span class="s2">def </span><span class="s1">get_joinstyle</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_joinstyle</span><span class="s3">.</span><span class="s1">name</span>

    <span class="s2">def </span><span class="s1">get_capstyle</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_capstyle</span><span class="s3">.</span><span class="s1">name</span>

    <span class="s2">def </span><span class="s1">get_marker</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_marker</span>

    <span class="s2">def </span><span class="s1">_set_marker</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">marker</span><span class="s3">):</span>
        <span class="s0">&quot;&quot;&quot; 
        Set the marker. 
 
        Parameters 
        ---------- 
        marker : str, array-like, Path, MarkerStyle 
            - Another instance of `MarkerStyle` copies the details of that *marker*. 
            - For other possible marker values see the module docstring 
              `matplotlib.markers`. 
        &quot;&quot;&quot;</span>
        <span class="s2">if </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">marker</span><span class="s3">, </span><span class="s1">str</span><span class="s3">) </span><span class="s2">and </span><span class="s1">cbook</span><span class="s3">.</span><span class="s1">is_math_text</span><span class="s3">(</span><span class="s1">marker</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_marker_function </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_set_mathtext_path</span>
        <span class="s2">elif </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">marker</span><span class="s3">, (</span><span class="s1">int</span><span class="s3">, </span><span class="s1">str</span><span class="s3">)) </span><span class="s2">and </span><span class="s1">marker </span><span class="s2">in </span><span class="s1">self</span><span class="s3">.</span><span class="s1">markers</span><span class="s3">:</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_marker_function </span><span class="s3">= </span><span class="s1">getattr</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s6">'_set_' </span><span class="s3">+ </span><span class="s1">self</span><span class="s3">.</span><span class="s1">markers</span><span class="s3">[</span><span class="s1">marker</span><span class="s3">])</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">marker</span><span class="s3">, </span><span class="s1">np</span><span class="s3">.</span><span class="s1">ndarray</span><span class="s3">) </span><span class="s2">and </span><span class="s1">marker</span><span class="s3">.</span><span class="s1">ndim </span><span class="s3">== </span><span class="s5">2 </span><span class="s2">and</span>
                <span class="s1">marker</span><span class="s3">.</span><span class="s1">shape</span><span class="s3">[</span><span class="s5">1</span><span class="s3">] == </span><span class="s5">2</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_marker_function </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_set_vertices</span>
        <span class="s2">elif </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">marker</span><span class="s3">, </span><span class="s1">Path</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_marker_function </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_set_path_marker</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">marker</span><span class="s3">, </span><span class="s1">Sized</span><span class="s3">) </span><span class="s2">and </span><span class="s1">len</span><span class="s3">(</span><span class="s1">marker</span><span class="s3">) </span><span class="s2">in </span><span class="s3">(</span><span class="s5">2</span><span class="s3">, </span><span class="s5">3</span><span class="s3">) </span><span class="s2">and</span>
                <span class="s1">marker</span><span class="s3">[</span><span class="s5">1</span><span class="s3">] </span><span class="s2">in </span><span class="s3">(</span><span class="s5">0</span><span class="s3">, </span><span class="s5">1</span><span class="s3">, </span><span class="s5">2</span><span class="s3">)):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_marker_function </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_set_tuple_marker</span>
        <span class="s2">elif </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">marker</span><span class="s3">, </span><span class="s1">MarkerStyle</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">__dict__ </span><span class="s3">= </span><span class="s1">copy</span><span class="s3">.</span><span class="s1">deepcopy</span><span class="s3">(</span><span class="s1">marker</span><span class="s3">.</span><span class="s1">__dict__</span><span class="s3">)</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s2">try</span><span class="s3">:</span>
                <span class="s1">Path</span><span class="s3">(</span><span class="s1">marker</span><span class="s3">)</span>
                <span class="s1">self</span><span class="s3">.</span><span class="s1">_marker_function </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_set_vertices</span>
            <span class="s2">except </span><span class="s1">ValueError </span><span class="s2">as </span><span class="s1">err</span><span class="s3">:</span>
                <span class="s2">raise </span><span class="s1">ValueError</span><span class="s3">(</span>
                    <span class="s6">f'Unrecognized marker style </span><span class="s2">{</span><span class="s1">marker</span><span class="s2">!r}</span><span class="s6">'</span><span class="s3">) </span><span class="s2">from </span><span class="s1">err</span>

        <span class="s2">if not </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">marker</span><span class="s3">, </span><span class="s1">MarkerStyle</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_marker </span><span class="s3">= </span><span class="s1">marker</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_recache</span><span class="s3">()</span>

    <span class="s2">def </span><span class="s1">get_path</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s0">&quot;&quot;&quot; 
        Return a `.Path` for the primary part of the marker. 
 
        For unfilled markers this is the whole marker, for filled markers, 
        this is the area to be drawn with *markerfacecolor*. 
        &quot;&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_path</span>

    <span class="s2">def </span><span class="s1">get_transform</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s0">&quot;&quot;&quot; 
        Return the transform to be applied to the `.Path` from 
        `MarkerStyle.get_path()`. 
        &quot;&quot;&quot;</span>
        <span class="s2">if </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_user_transform </span><span class="s2">is None</span><span class="s3">:</span>
            <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span><span class="s3">.</span><span class="s1">frozen</span><span class="s3">()</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s2">return </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">+ </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_user_transform</span><span class="s3">).</span><span class="s1">frozen</span><span class="s3">()</span>

    <span class="s2">def </span><span class="s1">get_alt_path</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s0">&quot;&quot;&quot; 
        Return a `.Path` for the alternate part of the marker. 
 
        For unfilled markers, this is *None*; for filled markers, this is the 
        area to be drawn with *markerfacecoloralt*. 
        &quot;&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_path</span>

    <span class="s2">def </span><span class="s1">get_alt_transform</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s0">&quot;&quot;&quot; 
        Return the transform to be applied to the `.Path` from 
        `MarkerStyle.get_alt_path()`. 
        &quot;&quot;&quot;</span>
        <span class="s2">if </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_user_transform </span><span class="s2">is None</span><span class="s3">:</span>
            <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_transform</span><span class="s3">.</span><span class="s1">frozen</span><span class="s3">()</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s2">return </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_transform </span><span class="s3">+ </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_user_transform</span><span class="s3">).</span><span class="s1">frozen</span><span class="s3">()</span>

    <span class="s2">def </span><span class="s1">get_snap_threshold</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_snap_threshold</span>

    <span class="s2">def </span><span class="s1">get_user_transform</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s0">&quot;&quot;&quot;Return user supplied part of marker transform.&quot;&quot;&quot;</span>
        <span class="s2">if </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_user_transform </span><span class="s2">is not None</span><span class="s3">:</span>
            <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_user_transform</span><span class="s3">.</span><span class="s1">frozen</span><span class="s3">()</span>

    <span class="s2">def </span><span class="s1">transformed</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">transform</span><span class="s3">):</span>
        <span class="s0">&quot;&quot;&quot; 
        Return a new version of this marker with the transform applied. 
 
        Parameters 
        ---------- 
        transform : `~matplotlib.transforms.Affine2D` 
            Transform will be combined with current user supplied transform. 
        &quot;&quot;&quot;</span>
        <span class="s1">new_marker </span><span class="s3">= </span><span class="s1">MarkerStyle</span><span class="s3">(</span><span class="s1">self</span><span class="s3">)</span>
        <span class="s2">if </span><span class="s1">new_marker</span><span class="s3">.</span><span class="s1">_user_transform </span><span class="s2">is not None</span><span class="s3">:</span>
            <span class="s1">new_marker</span><span class="s3">.</span><span class="s1">_user_transform </span><span class="s3">+= </span><span class="s1">transform</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s1">new_marker</span><span class="s3">.</span><span class="s1">_user_transform </span><span class="s3">= </span><span class="s1">transform</span>
        <span class="s2">return </span><span class="s1">new_marker</span>

    <span class="s2">def </span><span class="s1">rotated</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, *, </span><span class="s1">deg</span><span class="s3">=</span><span class="s2">None</span><span class="s3">, </span><span class="s1">rad</span><span class="s3">=</span><span class="s2">None</span><span class="s3">):</span>
        <span class="s0">&quot;&quot;&quot; 
        Return a new version of this marker rotated by specified angle. 
 
        Parameters 
        ---------- 
        deg : float, optional 
            Rotation angle in degrees. 
 
        rad : float, optional 
            Rotation angle in radians. 
 
        .. note:: You must specify exactly one of deg or rad. 
        &quot;&quot;&quot;</span>
        <span class="s2">if </span><span class="s1">deg </span><span class="s2">is None and </span><span class="s1">rad </span><span class="s2">is None</span><span class="s3">:</span>
            <span class="s2">raise </span><span class="s1">ValueError</span><span class="s3">(</span><span class="s6">'One of deg or rad is required'</span><span class="s3">)</span>
        <span class="s2">if </span><span class="s1">deg </span><span class="s2">is not None and </span><span class="s1">rad </span><span class="s2">is not None</span><span class="s3">:</span>
            <span class="s2">raise </span><span class="s1">ValueError</span><span class="s3">(</span><span class="s6">'Only one of deg and rad can be supplied'</span><span class="s3">)</span>
        <span class="s1">new_marker </span><span class="s3">= </span><span class="s1">MarkerStyle</span><span class="s3">(</span><span class="s1">self</span><span class="s3">)</span>
        <span class="s2">if </span><span class="s1">new_marker</span><span class="s3">.</span><span class="s1">_user_transform </span><span class="s2">is None</span><span class="s3">:</span>
            <span class="s1">new_marker</span><span class="s3">.</span><span class="s1">_user_transform </span><span class="s3">= </span><span class="s1">Affine2D</span><span class="s3">()</span>

        <span class="s2">if </span><span class="s1">deg </span><span class="s2">is not None</span><span class="s3">:</span>
            <span class="s1">new_marker</span><span class="s3">.</span><span class="s1">_user_transform</span><span class="s3">.</span><span class="s1">rotate_deg</span><span class="s3">(</span><span class="s1">deg</span><span class="s3">)</span>
        <span class="s2">if </span><span class="s1">rad </span><span class="s2">is not None</span><span class="s3">:</span>
            <span class="s1">new_marker</span><span class="s3">.</span><span class="s1">_user_transform</span><span class="s3">.</span><span class="s1">rotate</span><span class="s3">(</span><span class="s1">rad</span><span class="s3">)</span>

        <span class="s2">return </span><span class="s1">new_marker</span>

    <span class="s2">def </span><span class="s1">scaled</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">sx</span><span class="s3">, </span><span class="s1">sy</span><span class="s3">=</span><span class="s2">None</span><span class="s3">):</span>
        <span class="s0">&quot;&quot;&quot; 
        Return new marker scaled by specified scale factors. 
 
        If *sy* is not given, the same scale is applied in both the *x*- and 
        *y*-directions. 
 
        Parameters 
        ---------- 
        sx : float 
            *X*-direction scaling factor. 
        sy : float, optional 
            *Y*-direction scaling factor. 
        &quot;&quot;&quot;</span>
        <span class="s2">if </span><span class="s1">sy </span><span class="s2">is None</span><span class="s3">:</span>
            <span class="s1">sy </span><span class="s3">= </span><span class="s1">sx</span>

        <span class="s1">new_marker </span><span class="s3">= </span><span class="s1">MarkerStyle</span><span class="s3">(</span><span class="s1">self</span><span class="s3">)</span>
        <span class="s1">_transform </span><span class="s3">= </span><span class="s1">new_marker</span><span class="s3">.</span><span class="s1">_user_transform </span><span class="s2">or </span><span class="s1">Affine2D</span><span class="s3">()</span>
        <span class="s1">new_marker</span><span class="s3">.</span><span class="s1">_user_transform </span><span class="s3">= </span><span class="s1">_transform</span><span class="s3">.</span><span class="s1">scale</span><span class="s3">(</span><span class="s1">sx</span><span class="s3">, </span><span class="s1">sy</span><span class="s3">)</span>
        <span class="s2">return </span><span class="s1">new_marker</span>

    <span class="s2">def </span><span class="s1">_set_nothing</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_filled </span><span class="s3">= </span><span class="s2">False</span>

    <span class="s2">def </span><span class="s1">_set_custom_marker</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">path</span><span class="s3">):</span>
        <span class="s1">rescale </span><span class="s3">= </span><span class="s1">np</span><span class="s3">.</span><span class="s1">max</span><span class="s3">(</span><span class="s1">np</span><span class="s3">.</span><span class="s1">abs</span><span class="s3">(</span><span class="s1">path</span><span class="s3">.</span><span class="s1">vertices</span><span class="s3">))  </span><span class="s4"># max of x's and y's.</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">Affine2D</span><span class="s3">().</span><span class="s1">scale</span><span class="s3">(</span><span class="s5">0.5 </span><span class="s3">/ </span><span class="s1">rescale</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">path</span>

    <span class="s2">def </span><span class="s1">_set_path_marker</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_set_custom_marker</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_marker</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">_set_vertices</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_set_custom_marker</span><span class="s3">(</span><span class="s1">Path</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_marker</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">_set_tuple_marker</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">marker </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_marker</span>
        <span class="s2">if </span><span class="s1">len</span><span class="s3">(</span><span class="s1">marker</span><span class="s3">) == </span><span class="s5">2</span><span class="s3">:</span>
            <span class="s1">numsides</span><span class="s3">, </span><span class="s1">rotation </span><span class="s3">= </span><span class="s1">marker</span><span class="s3">[</span><span class="s5">0</span><span class="s3">], </span><span class="s5">0.0</span>
        <span class="s2">elif </span><span class="s1">len</span><span class="s3">(</span><span class="s1">marker</span><span class="s3">) == </span><span class="s5">3</span><span class="s3">:</span>
            <span class="s1">numsides</span><span class="s3">, </span><span class="s1">rotation </span><span class="s3">= </span><span class="s1">marker</span><span class="s3">[</span><span class="s5">0</span><span class="s3">], </span><span class="s1">marker</span><span class="s3">[</span><span class="s5">2</span><span class="s3">]</span>
        <span class="s1">symstyle </span><span class="s3">= </span><span class="s1">marker</span><span class="s3">[</span><span class="s5">1</span><span class="s3">]</span>
        <span class="s2">if </span><span class="s1">symstyle </span><span class="s3">== </span><span class="s5">0</span><span class="s3">:</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">unit_regular_polygon</span><span class="s3">(</span><span class="s1">numsides</span><span class="s3">)</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_joinstyle </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_user_joinstyle </span><span class="s2">or </span><span class="s1">JoinStyle</span><span class="s3">.</span><span class="s1">miter</span>
        <span class="s2">elif </span><span class="s1">symstyle </span><span class="s3">== </span><span class="s5">1</span><span class="s3">:</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">unit_regular_star</span><span class="s3">(</span><span class="s1">numsides</span><span class="s3">)</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_joinstyle </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_user_joinstyle </span><span class="s2">or </span><span class="s1">JoinStyle</span><span class="s3">.</span><span class="s1">bevel</span>
        <span class="s2">elif </span><span class="s1">symstyle </span><span class="s3">== </span><span class="s5">2</span><span class="s3">:</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">unit_regular_asterisk</span><span class="s3">(</span><span class="s1">numsides</span><span class="s3">)</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_filled </span><span class="s3">= </span><span class="s2">False</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_joinstyle </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_user_joinstyle </span><span class="s2">or </span><span class="s1">JoinStyle</span><span class="s3">.</span><span class="s1">bevel</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s2">raise </span><span class="s1">ValueError</span><span class="s3">(</span><span class="s6">f&quot;Unexpected tuple marker: </span><span class="s2">{</span><span class="s1">marker</span><span class="s2">}</span><span class="s6">&quot;</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">Affine2D</span><span class="s3">().</span><span class="s1">scale</span><span class="s3">(</span><span class="s5">0.5</span><span class="s3">).</span><span class="s1">rotate_deg</span><span class="s3">(</span><span class="s1">rotation</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">_set_mathtext_path</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s0">&quot;&quot;&quot; 
        Draw mathtext markers '$...$' using `.TextPath` object. 
 
        Submitted by tcb 
        &quot;&quot;&quot;</span>
        <span class="s2">from </span><span class="s1">matplotlib</span><span class="s3">.</span><span class="s1">text </span><span class="s2">import </span><span class="s1">TextPath</span>

        <span class="s4"># again, the properties could be initialised just once outside</span>
        <span class="s4"># this function</span>
        <span class="s1">text </span><span class="s3">= </span><span class="s1">TextPath</span><span class="s3">(</span><span class="s1">xy</span><span class="s3">=(</span><span class="s5">0</span><span class="s3">, </span><span class="s5">0</span><span class="s3">), </span><span class="s1">s</span><span class="s3">=</span><span class="s1">self</span><span class="s3">.</span><span class="s1">get_marker</span><span class="s3">(),</span>
                        <span class="s1">usetex</span><span class="s3">=</span><span class="s1">mpl</span><span class="s3">.</span><span class="s1">rcParams</span><span class="s3">[</span><span class="s6">'text.usetex'</span><span class="s3">])</span>
        <span class="s2">if </span><span class="s1">len</span><span class="s3">(</span><span class="s1">text</span><span class="s3">.</span><span class="s1">vertices</span><span class="s3">) == </span><span class="s5">0</span><span class="s3">:</span>
            <span class="s2">return</span>

        <span class="s1">bbox </span><span class="s3">= </span><span class="s1">text</span><span class="s3">.</span><span class="s1">get_extents</span><span class="s3">()</span>
        <span class="s1">max_dim </span><span class="s3">= </span><span class="s1">max</span><span class="s3">(</span><span class="s1">bbox</span><span class="s3">.</span><span class="s1">width</span><span class="s3">, </span><span class="s1">bbox</span><span class="s3">.</span><span class="s1">height</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= (</span>
            <span class="s1">Affine2D</span><span class="s3">()</span>
            <span class="s3">.</span><span class="s1">translate</span><span class="s3">(-</span><span class="s1">bbox</span><span class="s3">.</span><span class="s1">xmin </span><span class="s3">+ </span><span class="s5">0.5 </span><span class="s3">* -</span><span class="s1">bbox</span><span class="s3">.</span><span class="s1">width</span><span class="s3">, -</span><span class="s1">bbox</span><span class="s3">.</span><span class="s1">ymin </span><span class="s3">+ </span><span class="s5">0.5 </span><span class="s3">* -</span><span class="s1">bbox</span><span class="s3">.</span><span class="s1">height</span><span class="s3">)</span>
            <span class="s3">.</span><span class="s1">scale</span><span class="s3">(</span><span class="s5">1.0 </span><span class="s3">/ </span><span class="s1">max_dim</span><span class="s3">))</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">text</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_snap </span><span class="s3">= </span><span class="s2">False</span>

    <span class="s2">def </span><span class="s1">_half_fill</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">get_fillstyle</span><span class="s3">() </span><span class="s2">in </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_half_fillstyles</span>

    <span class="s2">def </span><span class="s1">_set_circle</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">size</span><span class="s3">=</span><span class="s5">1.0</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">Affine2D</span><span class="s3">().</span><span class="s1">scale</span><span class="s3">(</span><span class="s5">0.5 </span><span class="s3">* </span><span class="s1">size</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_snap_threshold </span><span class="s3">= </span><span class="s1">np</span><span class="s3">.</span><span class="s1">inf</span>
        <span class="s2">if not </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_half_fill</span><span class="s3">():</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">unit_circle</span><span class="s3">()</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_path </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">unit_circle_righthalf</span><span class="s3">()</span>
            <span class="s1">fs </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">get_fillstyle</span><span class="s3">()</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span><span class="s3">.</span><span class="s1">rotate_deg</span><span class="s3">(</span>
                <span class="s3">{</span><span class="s6">'right'</span><span class="s3">: </span><span class="s5">0</span><span class="s3">, </span><span class="s6">'top'</span><span class="s3">: </span><span class="s5">90</span><span class="s3">, </span><span class="s6">'left'</span><span class="s3">: </span><span class="s5">180</span><span class="s3">, </span><span class="s6">'bottom'</span><span class="s3">: </span><span class="s5">270</span><span class="s3">}[</span><span class="s1">fs</span><span class="s3">])</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_transform </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span><span class="s3">.</span><span class="s1">frozen</span><span class="s3">().</span><span class="s1">rotate_deg</span><span class="s3">(</span><span class="s5">180.</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">_set_point</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_set_circle</span><span class="s3">(</span><span class="s1">size</span><span class="s3">=</span><span class="s5">0.5</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">_set_pixel</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">unit_rectangle</span><span class="s3">()</span>
        <span class="s4"># Ideally, you'd want -0.5, -0.5 here, but then the snapping</span>
        <span class="s4"># algorithm in the Agg backend will round this to a 2x2</span>
        <span class="s4"># rectangle from (-1, -1) to (1, 1).  By offsetting it</span>
        <span class="s4"># slightly, we can force it to be (0, 0) to (1, 1), which both</span>
        <span class="s4"># makes it only be a single pixel and places it correctly</span>
        <span class="s4"># aligned to 1-width stroking (i.e. the ticks).  This hack is</span>
        <span class="s4"># the best of a number of bad alternatives, mainly because the</span>
        <span class="s4"># backends are not aware of what marker is actually being used</span>
        <span class="s4"># beyond just its path data.</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">Affine2D</span><span class="s3">().</span><span class="s1">translate</span><span class="s3">(-</span><span class="s5">0.49999</span><span class="s3">, -</span><span class="s5">0.49999</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_snap_threshold </span><span class="s3">= </span><span class="s2">None</span>

    <span class="s1">_triangle_path </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">_create_closed</span><span class="s3">([[</span><span class="s5">0</span><span class="s3">, </span><span class="s5">1</span><span class="s3">], [-</span><span class="s5">1</span><span class="s3">, -</span><span class="s5">1</span><span class="s3">], [</span><span class="s5">1</span><span class="s3">, -</span><span class="s5">1</span><span class="s3">]])</span>
    <span class="s4"># Going down halfway looks to small.  Golden ratio is too far.</span>
    <span class="s1">_triangle_path_u </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">_create_closed</span><span class="s3">([[</span><span class="s5">0</span><span class="s3">, </span><span class="s5">1</span><span class="s3">], [-</span><span class="s5">3</span><span class="s3">/</span><span class="s5">5</span><span class="s3">, -</span><span class="s5">1</span><span class="s3">/</span><span class="s5">5</span><span class="s3">], [</span><span class="s5">3</span><span class="s3">/</span><span class="s5">5</span><span class="s3">, -</span><span class="s5">1</span><span class="s3">/</span><span class="s5">5</span><span class="s3">]])</span>
    <span class="s1">_triangle_path_d </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">_create_closed</span><span class="s3">(</span>
        <span class="s3">[[-</span><span class="s5">3</span><span class="s3">/</span><span class="s5">5</span><span class="s3">, -</span><span class="s5">1</span><span class="s3">/</span><span class="s5">5</span><span class="s3">], [</span><span class="s5">3</span><span class="s3">/</span><span class="s5">5</span><span class="s3">, -</span><span class="s5">1</span><span class="s3">/</span><span class="s5">5</span><span class="s3">], [</span><span class="s5">1</span><span class="s3">, -</span><span class="s5">1</span><span class="s3">], [-</span><span class="s5">1</span><span class="s3">, -</span><span class="s5">1</span><span class="s3">]])</span>
    <span class="s1">_triangle_path_l </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">_create_closed</span><span class="s3">([[</span><span class="s5">0</span><span class="s3">, </span><span class="s5">1</span><span class="s3">], [</span><span class="s5">0</span><span class="s3">, -</span><span class="s5">1</span><span class="s3">], [-</span><span class="s5">1</span><span class="s3">, -</span><span class="s5">1</span><span class="s3">]])</span>
    <span class="s1">_triangle_path_r </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">_create_closed</span><span class="s3">([[</span><span class="s5">0</span><span class="s3">, </span><span class="s5">1</span><span class="s3">], [</span><span class="s5">0</span><span class="s3">, -</span><span class="s5">1</span><span class="s3">], [</span><span class="s5">1</span><span class="s3">, -</span><span class="s5">1</span><span class="s3">]])</span>

    <span class="s2">def </span><span class="s1">_set_triangle</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">rot</span><span class="s3">, </span><span class="s1">skip</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">Affine2D</span><span class="s3">().</span><span class="s1">scale</span><span class="s3">(</span><span class="s5">0.5</span><span class="s3">).</span><span class="s1">rotate_deg</span><span class="s3">(</span><span class="s1">rot</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_snap_threshold </span><span class="s3">= </span><span class="s5">5.0</span>

        <span class="s2">if not </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_half_fill</span><span class="s3">():</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_triangle_path</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s1">mpaths </span><span class="s3">= [</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_triangle_path_u</span><span class="s3">,</span>
                      <span class="s1">self</span><span class="s3">.</span><span class="s1">_triangle_path_l</span><span class="s3">,</span>
                      <span class="s1">self</span><span class="s3">.</span><span class="s1">_triangle_path_d</span><span class="s3">,</span>
                      <span class="s1">self</span><span class="s3">.</span><span class="s1">_triangle_path_r</span><span class="s3">]</span>

            <span class="s1">fs </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">get_fillstyle</span><span class="s3">()</span>
            <span class="s2">if </span><span class="s1">fs </span><span class="s3">== </span><span class="s6">'top'</span><span class="s3">:</span>
                <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">mpaths</span><span class="s3">[(</span><span class="s5">0 </span><span class="s3">+ </span><span class="s1">skip</span><span class="s3">) % </span><span class="s5">4</span><span class="s3">]</span>
                <span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_path </span><span class="s3">= </span><span class="s1">mpaths</span><span class="s3">[(</span><span class="s5">2 </span><span class="s3">+ </span><span class="s1">skip</span><span class="s3">) % </span><span class="s5">4</span><span class="s3">]</span>
            <span class="s2">elif </span><span class="s1">fs </span><span class="s3">== </span><span class="s6">'bottom'</span><span class="s3">:</span>
                <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">mpaths</span><span class="s3">[(</span><span class="s5">2 </span><span class="s3">+ </span><span class="s1">skip</span><span class="s3">) % </span><span class="s5">4</span><span class="s3">]</span>
                <span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_path </span><span class="s3">= </span><span class="s1">mpaths</span><span class="s3">[(</span><span class="s5">0 </span><span class="s3">+ </span><span class="s1">skip</span><span class="s3">) % </span><span class="s5">4</span><span class="s3">]</span>
            <span class="s2">elif </span><span class="s1">fs </span><span class="s3">== </span><span class="s6">'left'</span><span class="s3">:</span>
                <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">mpaths</span><span class="s3">[(</span><span class="s5">1 </span><span class="s3">+ </span><span class="s1">skip</span><span class="s3">) % </span><span class="s5">4</span><span class="s3">]</span>
                <span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_path </span><span class="s3">= </span><span class="s1">mpaths</span><span class="s3">[(</span><span class="s5">3 </span><span class="s3">+ </span><span class="s1">skip</span><span class="s3">) % </span><span class="s5">4</span><span class="s3">]</span>
            <span class="s2">else</span><span class="s3">:</span>
                <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">mpaths</span><span class="s3">[(</span><span class="s5">3 </span><span class="s3">+ </span><span class="s1">skip</span><span class="s3">) % </span><span class="s5">4</span><span class="s3">]</span>
                <span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_path </span><span class="s3">= </span><span class="s1">mpaths</span><span class="s3">[(</span><span class="s5">1 </span><span class="s3">+ </span><span class="s1">skip</span><span class="s3">) % </span><span class="s5">4</span><span class="s3">]</span>

            <span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_transform </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span>

        <span class="s1">self</span><span class="s3">.</span><span class="s1">_joinstyle </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_user_joinstyle </span><span class="s2">or </span><span class="s1">JoinStyle</span><span class="s3">.</span><span class="s1">miter</span>

    <span class="s2">def </span><span class="s1">_set_triangle_up</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_set_triangle</span><span class="s3">(</span><span class="s5">0.0</span><span class="s3">, </span><span class="s5">0</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">_set_triangle_down</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_set_triangle</span><span class="s3">(</span><span class="s5">180.0</span><span class="s3">, </span><span class="s5">2</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">_set_triangle_left</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_set_triangle</span><span class="s3">(</span><span class="s5">90.0</span><span class="s3">, </span><span class="s5">3</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">_set_triangle_right</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_set_triangle</span><span class="s3">(</span><span class="s5">270.0</span><span class="s3">, </span><span class="s5">1</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">_set_square</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">Affine2D</span><span class="s3">().</span><span class="s1">translate</span><span class="s3">(-</span><span class="s5">0.5</span><span class="s3">, -</span><span class="s5">0.5</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_snap_threshold </span><span class="s3">= </span><span class="s5">2.0</span>
        <span class="s2">if not </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_half_fill</span><span class="s3">():</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">unit_rectangle</span><span class="s3">()</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s4"># Build a bottom filled square out of two rectangles, one filled.</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">([[</span><span class="s5">0.0</span><span class="s3">, </span><span class="s5">0.0</span><span class="s3">], [</span><span class="s5">1.0</span><span class="s3">, </span><span class="s5">0.0</span><span class="s3">], [</span><span class="s5">1.0</span><span class="s3">, </span><span class="s5">0.5</span><span class="s3">],</span>
                               <span class="s3">[</span><span class="s5">0.0</span><span class="s3">, </span><span class="s5">0.5</span><span class="s3">], [</span><span class="s5">0.0</span><span class="s3">, </span><span class="s5">0.0</span><span class="s3">]])</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_path </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">([[</span><span class="s5">0.0</span><span class="s3">, </span><span class="s5">0.5</span><span class="s3">], [</span><span class="s5">1.0</span><span class="s3">, </span><span class="s5">0.5</span><span class="s3">], [</span><span class="s5">1.0</span><span class="s3">, </span><span class="s5">1.0</span><span class="s3">],</span>
                                   <span class="s3">[</span><span class="s5">0.0</span><span class="s3">, </span><span class="s5">1.0</span><span class="s3">], [</span><span class="s5">0.0</span><span class="s3">, </span><span class="s5">0.5</span><span class="s3">]])</span>
            <span class="s1">fs </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">get_fillstyle</span><span class="s3">()</span>
            <span class="s1">rotate </span><span class="s3">= {</span><span class="s6">'bottom'</span><span class="s3">: </span><span class="s5">0</span><span class="s3">, </span><span class="s6">'right'</span><span class="s3">: </span><span class="s5">90</span><span class="s3">, </span><span class="s6">'top'</span><span class="s3">: </span><span class="s5">180</span><span class="s3">, </span><span class="s6">'left'</span><span class="s3">: </span><span class="s5">270</span><span class="s3">}[</span><span class="s1">fs</span><span class="s3">]</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span><span class="s3">.</span><span class="s1">rotate_deg</span><span class="s3">(</span><span class="s1">rotate</span><span class="s3">)</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_transform </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span>

        <span class="s1">self</span><span class="s3">.</span><span class="s1">_joinstyle </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_user_joinstyle </span><span class="s2">or </span><span class="s1">JoinStyle</span><span class="s3">.</span><span class="s1">miter</span>

    <span class="s2">def </span><span class="s1">_set_diamond</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">Affine2D</span><span class="s3">().</span><span class="s1">translate</span><span class="s3">(-</span><span class="s5">0.5</span><span class="s3">, -</span><span class="s5">0.5</span><span class="s3">).</span><span class="s1">rotate_deg</span><span class="s3">(</span><span class="s5">45</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_snap_threshold </span><span class="s3">= </span><span class="s5">5.0</span>
        <span class="s2">if not </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_half_fill</span><span class="s3">():</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">unit_rectangle</span><span class="s3">()</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">([[</span><span class="s5">0</span><span class="s3">, </span><span class="s5">0</span><span class="s3">], [</span><span class="s5">1</span><span class="s3">, </span><span class="s5">0</span><span class="s3">], [</span><span class="s5">1</span><span class="s3">, </span><span class="s5">1</span><span class="s3">], [</span><span class="s5">0</span><span class="s3">, </span><span class="s5">0</span><span class="s3">]])</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_path </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">([[</span><span class="s5">0</span><span class="s3">, </span><span class="s5">0</span><span class="s3">], [</span><span class="s5">0</span><span class="s3">, </span><span class="s5">1</span><span class="s3">], [</span><span class="s5">1</span><span class="s3">, </span><span class="s5">1</span><span class="s3">], [</span><span class="s5">0</span><span class="s3">, </span><span class="s5">0</span><span class="s3">]])</span>
            <span class="s1">fs </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">get_fillstyle</span><span class="s3">()</span>
            <span class="s1">rotate </span><span class="s3">= {</span><span class="s6">'right'</span><span class="s3">: </span><span class="s5">0</span><span class="s3">, </span><span class="s6">'top'</span><span class="s3">: </span><span class="s5">90</span><span class="s3">, </span><span class="s6">'left'</span><span class="s3">: </span><span class="s5">180</span><span class="s3">, </span><span class="s6">'bottom'</span><span class="s3">: </span><span class="s5">270</span><span class="s3">}[</span><span class="s1">fs</span><span class="s3">]</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span><span class="s3">.</span><span class="s1">rotate_deg</span><span class="s3">(</span><span class="s1">rotate</span><span class="s3">)</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_transform </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_joinstyle </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_user_joinstyle </span><span class="s2">or </span><span class="s1">JoinStyle</span><span class="s3">.</span><span class="s1">miter</span>

    <span class="s2">def </span><span class="s1">_set_thin_diamond</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_set_diamond</span><span class="s3">()</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span><span class="s3">.</span><span class="s1">scale</span><span class="s3">(</span><span class="s5">0.6</span><span class="s3">, </span><span class="s5">1.0</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">_set_pentagon</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">Affine2D</span><span class="s3">().</span><span class="s1">scale</span><span class="s3">(</span><span class="s5">0.5</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_snap_threshold </span><span class="s3">= </span><span class="s5">5.0</span>

        <span class="s1">polypath </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">unit_regular_polygon</span><span class="s3">(</span><span class="s5">5</span><span class="s3">)</span>

        <span class="s2">if not </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_half_fill</span><span class="s3">():</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">polypath</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s1">verts </span><span class="s3">= </span><span class="s1">polypath</span><span class="s3">.</span><span class="s1">vertices</span>
            <span class="s1">y </span><span class="s3">= (</span><span class="s5">1 </span><span class="s3">+ </span><span class="s1">np</span><span class="s3">.</span><span class="s1">sqrt</span><span class="s3">(</span><span class="s5">5</span><span class="s3">)) / </span><span class="s5">4.</span>
            <span class="s1">top </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">(</span><span class="s1">verts</span><span class="s3">[[</span><span class="s5">0</span><span class="s3">, </span><span class="s5">1</span><span class="s3">, </span><span class="s5">4</span><span class="s3">, </span><span class="s5">0</span><span class="s3">]])</span>
            <span class="s1">bottom </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">(</span><span class="s1">verts</span><span class="s3">[[</span><span class="s5">1</span><span class="s3">, </span><span class="s5">2</span><span class="s3">, </span><span class="s5">3</span><span class="s3">, </span><span class="s5">4</span><span class="s3">, </span><span class="s5">1</span><span class="s3">]])</span>
            <span class="s1">left </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">([</span><span class="s1">verts</span><span class="s3">[</span><span class="s5">0</span><span class="s3">], </span><span class="s1">verts</span><span class="s3">[</span><span class="s5">1</span><span class="s3">], </span><span class="s1">verts</span><span class="s3">[</span><span class="s5">2</span><span class="s3">], [</span><span class="s5">0</span><span class="s3">, -</span><span class="s1">y</span><span class="s3">], </span><span class="s1">verts</span><span class="s3">[</span><span class="s5">0</span><span class="s3">]])</span>
            <span class="s1">right </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">([</span><span class="s1">verts</span><span class="s3">[</span><span class="s5">0</span><span class="s3">], </span><span class="s1">verts</span><span class="s3">[</span><span class="s5">4</span><span class="s3">], </span><span class="s1">verts</span><span class="s3">[</span><span class="s5">3</span><span class="s3">], [</span><span class="s5">0</span><span class="s3">, -</span><span class="s1">y</span><span class="s3">], </span><span class="s1">verts</span><span class="s3">[</span><span class="s5">0</span><span class="s3">]])</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_path</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_path </span><span class="s3">= {</span>
                <span class="s6">'top'</span><span class="s3">: (</span><span class="s1">top</span><span class="s3">, </span><span class="s1">bottom</span><span class="s3">), </span><span class="s6">'bottom'</span><span class="s3">: (</span><span class="s1">bottom</span><span class="s3">, </span><span class="s1">top</span><span class="s3">),</span>
                <span class="s6">'left'</span><span class="s3">: (</span><span class="s1">left</span><span class="s3">, </span><span class="s1">right</span><span class="s3">), </span><span class="s6">'right'</span><span class="s3">: (</span><span class="s1">right</span><span class="s3">, </span><span class="s1">left</span><span class="s3">),</span>
            <span class="s3">}[</span><span class="s1">self</span><span class="s3">.</span><span class="s1">get_fillstyle</span><span class="s3">()]</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_transform </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span>

        <span class="s1">self</span><span class="s3">.</span><span class="s1">_joinstyle </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_user_joinstyle </span><span class="s2">or </span><span class="s1">JoinStyle</span><span class="s3">.</span><span class="s1">miter</span>

    <span class="s2">def </span><span class="s1">_set_star</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">Affine2D</span><span class="s3">().</span><span class="s1">scale</span><span class="s3">(</span><span class="s5">0.5</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_snap_threshold </span><span class="s3">= </span><span class="s5">5.0</span>

        <span class="s1">polypath </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">unit_regular_star</span><span class="s3">(</span><span class="s5">5</span><span class="s3">, </span><span class="s1">innerCircle</span><span class="s3">=</span><span class="s5">0.381966</span><span class="s3">)</span>

        <span class="s2">if not </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_half_fill</span><span class="s3">():</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">polypath</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s1">verts </span><span class="s3">= </span><span class="s1">polypath</span><span class="s3">.</span><span class="s1">vertices</span>
            <span class="s1">top </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">(</span><span class="s1">np</span><span class="s3">.</span><span class="s1">concatenate</span><span class="s3">([</span><span class="s1">verts</span><span class="s3">[</span><span class="s5">0</span><span class="s3">:</span><span class="s5">4</span><span class="s3">], </span><span class="s1">verts</span><span class="s3">[</span><span class="s5">7</span><span class="s3">:</span><span class="s5">10</span><span class="s3">], </span><span class="s1">verts</span><span class="s3">[</span><span class="s5">0</span><span class="s3">:</span><span class="s5">1</span><span class="s3">]]))</span>
            <span class="s1">bottom </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">(</span><span class="s1">np</span><span class="s3">.</span><span class="s1">concatenate</span><span class="s3">([</span><span class="s1">verts</span><span class="s3">[</span><span class="s5">3</span><span class="s3">:</span><span class="s5">8</span><span class="s3">], </span><span class="s1">verts</span><span class="s3">[</span><span class="s5">3</span><span class="s3">:</span><span class="s5">4</span><span class="s3">]]))</span>
            <span class="s1">left </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">(</span><span class="s1">np</span><span class="s3">.</span><span class="s1">concatenate</span><span class="s3">([</span><span class="s1">verts</span><span class="s3">[</span><span class="s5">0</span><span class="s3">:</span><span class="s5">6</span><span class="s3">], </span><span class="s1">verts</span><span class="s3">[</span><span class="s5">0</span><span class="s3">:</span><span class="s5">1</span><span class="s3">]]))</span>
            <span class="s1">right </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">(</span><span class="s1">np</span><span class="s3">.</span><span class="s1">concatenate</span><span class="s3">([</span><span class="s1">verts</span><span class="s3">[</span><span class="s5">0</span><span class="s3">:</span><span class="s5">1</span><span class="s3">], </span><span class="s1">verts</span><span class="s3">[</span><span class="s5">5</span><span class="s3">:</span><span class="s5">10</span><span class="s3">], </span><span class="s1">verts</span><span class="s3">[</span><span class="s5">0</span><span class="s3">:</span><span class="s5">1</span><span class="s3">]]))</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_path</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_path </span><span class="s3">= {</span>
                <span class="s6">'top'</span><span class="s3">: (</span><span class="s1">top</span><span class="s3">, </span><span class="s1">bottom</span><span class="s3">), </span><span class="s6">'bottom'</span><span class="s3">: (</span><span class="s1">bottom</span><span class="s3">, </span><span class="s1">top</span><span class="s3">),</span>
                <span class="s6">'left'</span><span class="s3">: (</span><span class="s1">left</span><span class="s3">, </span><span class="s1">right</span><span class="s3">), </span><span class="s6">'right'</span><span class="s3">: (</span><span class="s1">right</span><span class="s3">, </span><span class="s1">left</span><span class="s3">),</span>
            <span class="s3">}[</span><span class="s1">self</span><span class="s3">.</span><span class="s1">get_fillstyle</span><span class="s3">()]</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_transform </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span>

        <span class="s1">self</span><span class="s3">.</span><span class="s1">_joinstyle </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_user_joinstyle </span><span class="s2">or </span><span class="s1">JoinStyle</span><span class="s3">.</span><span class="s1">bevel</span>

    <span class="s2">def </span><span class="s1">_set_hexagon1</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">Affine2D</span><span class="s3">().</span><span class="s1">scale</span><span class="s3">(</span><span class="s5">0.5</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_snap_threshold </span><span class="s3">= </span><span class="s2">None</span>

        <span class="s1">polypath </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">unit_regular_polygon</span><span class="s3">(</span><span class="s5">6</span><span class="s3">)</span>

        <span class="s2">if not </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_half_fill</span><span class="s3">():</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">polypath</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s1">verts </span><span class="s3">= </span><span class="s1">polypath</span><span class="s3">.</span><span class="s1">vertices</span>
            <span class="s4"># not drawing inside lines</span>
            <span class="s1">x </span><span class="s3">= </span><span class="s1">np</span><span class="s3">.</span><span class="s1">abs</span><span class="s3">(</span><span class="s1">np</span><span class="s3">.</span><span class="s1">cos</span><span class="s3">(</span><span class="s5">5 </span><span class="s3">* </span><span class="s1">np</span><span class="s3">.</span><span class="s1">pi </span><span class="s3">/ </span><span class="s5">6.</span><span class="s3">))</span>
            <span class="s1">top </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">(</span><span class="s1">np</span><span class="s3">.</span><span class="s1">concatenate</span><span class="s3">([[(-</span><span class="s1">x</span><span class="s3">, </span><span class="s5">0</span><span class="s3">)], </span><span class="s1">verts</span><span class="s3">[[</span><span class="s5">1</span><span class="s3">, </span><span class="s5">0</span><span class="s3">, </span><span class="s5">5</span><span class="s3">]], [(</span><span class="s1">x</span><span class="s3">, </span><span class="s5">0</span><span class="s3">)]]))</span>
            <span class="s1">bottom </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">(</span><span class="s1">np</span><span class="s3">.</span><span class="s1">concatenate</span><span class="s3">([[(-</span><span class="s1">x</span><span class="s3">, </span><span class="s5">0</span><span class="s3">)], </span><span class="s1">verts</span><span class="s3">[</span><span class="s5">2</span><span class="s3">:</span><span class="s5">5</span><span class="s3">], [(</span><span class="s1">x</span><span class="s3">, </span><span class="s5">0</span><span class="s3">)]]))</span>
            <span class="s1">left </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">(</span><span class="s1">verts</span><span class="s3">[</span><span class="s5">0</span><span class="s3">:</span><span class="s5">4</span><span class="s3">])</span>
            <span class="s1">right </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">(</span><span class="s1">verts</span><span class="s3">[[</span><span class="s5">0</span><span class="s3">, </span><span class="s5">5</span><span class="s3">, </span><span class="s5">4</span><span class="s3">, </span><span class="s5">3</span><span class="s3">]])</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_path</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_path </span><span class="s3">= {</span>
                <span class="s6">'top'</span><span class="s3">: (</span><span class="s1">top</span><span class="s3">, </span><span class="s1">bottom</span><span class="s3">), </span><span class="s6">'bottom'</span><span class="s3">: (</span><span class="s1">bottom</span><span class="s3">, </span><span class="s1">top</span><span class="s3">),</span>
                <span class="s6">'left'</span><span class="s3">: (</span><span class="s1">left</span><span class="s3">, </span><span class="s1">right</span><span class="s3">), </span><span class="s6">'right'</span><span class="s3">: (</span><span class="s1">right</span><span class="s3">, </span><span class="s1">left</span><span class="s3">),</span>
            <span class="s3">}[</span><span class="s1">self</span><span class="s3">.</span><span class="s1">get_fillstyle</span><span class="s3">()]</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_transform </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span>

        <span class="s1">self</span><span class="s3">.</span><span class="s1">_joinstyle </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_user_joinstyle </span><span class="s2">or </span><span class="s1">JoinStyle</span><span class="s3">.</span><span class="s1">miter</span>

    <span class="s2">def </span><span class="s1">_set_hexagon2</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">Affine2D</span><span class="s3">().</span><span class="s1">scale</span><span class="s3">(</span><span class="s5">0.5</span><span class="s3">).</span><span class="s1">rotate_deg</span><span class="s3">(</span><span class="s5">30</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_snap_threshold </span><span class="s3">= </span><span class="s2">None</span>

        <span class="s1">polypath </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">unit_regular_polygon</span><span class="s3">(</span><span class="s5">6</span><span class="s3">)</span>

        <span class="s2">if not </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_half_fill</span><span class="s3">():</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">polypath</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s1">verts </span><span class="s3">= </span><span class="s1">polypath</span><span class="s3">.</span><span class="s1">vertices</span>
            <span class="s4"># not drawing inside lines</span>
            <span class="s1">x</span><span class="s3">, </span><span class="s1">y </span><span class="s3">= </span><span class="s1">np</span><span class="s3">.</span><span class="s1">sqrt</span><span class="s3">(</span><span class="s5">3</span><span class="s3">) / </span><span class="s5">4</span><span class="s3">, </span><span class="s5">3 </span><span class="s3">/ </span><span class="s5">4.</span>
            <span class="s1">top </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">(</span><span class="s1">verts</span><span class="s3">[[</span><span class="s5">1</span><span class="s3">, </span><span class="s5">0</span><span class="s3">, </span><span class="s5">5</span><span class="s3">, </span><span class="s5">4</span><span class="s3">, </span><span class="s5">1</span><span class="s3">]])</span>
            <span class="s1">bottom </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">(</span><span class="s1">verts</span><span class="s3">[</span><span class="s5">1</span><span class="s3">:</span><span class="s5">5</span><span class="s3">])</span>
            <span class="s1">left </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">(</span><span class="s1">np</span><span class="s3">.</span><span class="s1">concatenate</span><span class="s3">([</span>
                <span class="s3">[(</span><span class="s1">x</span><span class="s3">, </span><span class="s1">y</span><span class="s3">)], </span><span class="s1">verts</span><span class="s3">[:</span><span class="s5">3</span><span class="s3">], [(-</span><span class="s1">x</span><span class="s3">, -</span><span class="s1">y</span><span class="s3">), (</span><span class="s1">x</span><span class="s3">, </span><span class="s1">y</span><span class="s3">)]]))</span>
            <span class="s1">right </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">(</span><span class="s1">np</span><span class="s3">.</span><span class="s1">concatenate</span><span class="s3">([</span>
                <span class="s3">[(</span><span class="s1">x</span><span class="s3">, </span><span class="s1">y</span><span class="s3">)], </span><span class="s1">verts</span><span class="s3">[</span><span class="s5">5</span><span class="s3">:</span><span class="s5">2</span><span class="s3">:-</span><span class="s5">1</span><span class="s3">], [(-</span><span class="s1">x</span><span class="s3">, -</span><span class="s1">y</span><span class="s3">)]]))</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_path</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_path </span><span class="s3">= {</span>
                <span class="s6">'top'</span><span class="s3">: (</span><span class="s1">top</span><span class="s3">, </span><span class="s1">bottom</span><span class="s3">), </span><span class="s6">'bottom'</span><span class="s3">: (</span><span class="s1">bottom</span><span class="s3">, </span><span class="s1">top</span><span class="s3">),</span>
                <span class="s6">'left'</span><span class="s3">: (</span><span class="s1">left</span><span class="s3">, </span><span class="s1">right</span><span class="s3">), </span><span class="s6">'right'</span><span class="s3">: (</span><span class="s1">right</span><span class="s3">, </span><span class="s1">left</span><span class="s3">),</span>
            <span class="s3">}[</span><span class="s1">self</span><span class="s3">.</span><span class="s1">get_fillstyle</span><span class="s3">()]</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_transform </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span>

        <span class="s1">self</span><span class="s3">.</span><span class="s1">_joinstyle </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_user_joinstyle </span><span class="s2">or </span><span class="s1">JoinStyle</span><span class="s3">.</span><span class="s1">miter</span>

    <span class="s2">def </span><span class="s1">_set_octagon</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">Affine2D</span><span class="s3">().</span><span class="s1">scale</span><span class="s3">(</span><span class="s5">0.5</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_snap_threshold </span><span class="s3">= </span><span class="s5">5.0</span>

        <span class="s1">polypath </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">unit_regular_polygon</span><span class="s3">(</span><span class="s5">8</span><span class="s3">)</span>

        <span class="s2">if not </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_half_fill</span><span class="s3">():</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span><span class="s3">.</span><span class="s1">rotate_deg</span><span class="s3">(</span><span class="s5">22.5</span><span class="s3">)</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">polypath</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s1">x </span><span class="s3">= </span><span class="s1">np</span><span class="s3">.</span><span class="s1">sqrt</span><span class="s3">(</span><span class="s5">2.</span><span class="s3">) / </span><span class="s5">4.</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_path </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">(</span>
                <span class="s3">[[</span><span class="s5">0</span><span class="s3">, -</span><span class="s5">1</span><span class="s3">], [</span><span class="s5">0</span><span class="s3">, </span><span class="s5">1</span><span class="s3">], [-</span><span class="s1">x</span><span class="s3">, </span><span class="s5">1</span><span class="s3">], [-</span><span class="s5">1</span><span class="s3">, </span><span class="s1">x</span><span class="s3">],</span>
                 <span class="s3">[-</span><span class="s5">1</span><span class="s3">, -</span><span class="s1">x</span><span class="s3">], [-</span><span class="s1">x</span><span class="s3">, -</span><span class="s5">1</span><span class="s3">], [</span><span class="s5">0</span><span class="s3">, -</span><span class="s5">1</span><span class="s3">]])</span>
            <span class="s1">fs </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">get_fillstyle</span><span class="s3">()</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span><span class="s3">.</span><span class="s1">rotate_deg</span><span class="s3">(</span>
                <span class="s3">{</span><span class="s6">'left'</span><span class="s3">: </span><span class="s5">0</span><span class="s3">, </span><span class="s6">'bottom'</span><span class="s3">: </span><span class="s5">90</span><span class="s3">, </span><span class="s6">'right'</span><span class="s3">: </span><span class="s5">180</span><span class="s3">, </span><span class="s6">'top'</span><span class="s3">: </span><span class="s5">270</span><span class="s3">}[</span><span class="s1">fs</span><span class="s3">])</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_transform </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span><span class="s3">.</span><span class="s1">frozen</span><span class="s3">().</span><span class="s1">rotate_deg</span><span class="s3">(</span><span class="s5">180.0</span><span class="s3">)</span>

        <span class="s1">self</span><span class="s3">.</span><span class="s1">_joinstyle </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_user_joinstyle </span><span class="s2">or </span><span class="s1">JoinStyle</span><span class="s3">.</span><span class="s1">miter</span>

    <span class="s1">_line_marker_path </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">([[</span><span class="s5">0.0</span><span class="s3">, -</span><span class="s5">1.0</span><span class="s3">], [</span><span class="s5">0.0</span><span class="s3">, </span><span class="s5">1.0</span><span class="s3">]])</span>

    <span class="s2">def </span><span class="s1">_set_vline</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">Affine2D</span><span class="s3">().</span><span class="s1">scale</span><span class="s3">(</span><span class="s5">0.5</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_snap_threshold </span><span class="s3">= </span><span class="s5">1.0</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_filled </span><span class="s3">= </span><span class="s2">False</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_line_marker_path</span>

    <span class="s2">def </span><span class="s1">_set_hline</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_set_vline</span><span class="s3">()</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span><span class="s3">.</span><span class="s1">rotate_deg</span><span class="s3">(</span><span class="s5">90</span><span class="s3">)</span>

    <span class="s1">_tickhoriz_path </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">([[</span><span class="s5">0.0</span><span class="s3">, </span><span class="s5">0.0</span><span class="s3">], [</span><span class="s5">1.0</span><span class="s3">, </span><span class="s5">0.0</span><span class="s3">]])</span>

    <span class="s2">def </span><span class="s1">_set_tickleft</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">Affine2D</span><span class="s3">().</span><span class="s1">scale</span><span class="s3">(-</span><span class="s5">1.0</span><span class="s3">, </span><span class="s5">1.0</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_snap_threshold </span><span class="s3">= </span><span class="s5">1.0</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_filled </span><span class="s3">= </span><span class="s2">False</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_tickhoriz_path</span>

    <span class="s2">def </span><span class="s1">_set_tickright</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">Affine2D</span><span class="s3">().</span><span class="s1">scale</span><span class="s3">(</span><span class="s5">1.0</span><span class="s3">, </span><span class="s5">1.0</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_snap_threshold </span><span class="s3">= </span><span class="s5">1.0</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_filled </span><span class="s3">= </span><span class="s2">False</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_tickhoriz_path</span>

    <span class="s1">_tickvert_path </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">([[-</span><span class="s5">0.0</span><span class="s3">, </span><span class="s5">0.0</span><span class="s3">], [-</span><span class="s5">0.0</span><span class="s3">, </span><span class="s5">1.0</span><span class="s3">]])</span>

    <span class="s2">def </span><span class="s1">_set_tickup</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">Affine2D</span><span class="s3">().</span><span class="s1">scale</span><span class="s3">(</span><span class="s5">1.0</span><span class="s3">, </span><span class="s5">1.0</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_snap_threshold </span><span class="s3">= </span><span class="s5">1.0</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_filled </span><span class="s3">= </span><span class="s2">False</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_tickvert_path</span>

    <span class="s2">def </span><span class="s1">_set_tickdown</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">Affine2D</span><span class="s3">().</span><span class="s1">scale</span><span class="s3">(</span><span class="s5">1.0</span><span class="s3">, -</span><span class="s5">1.0</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_snap_threshold </span><span class="s3">= </span><span class="s5">1.0</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_filled </span><span class="s3">= </span><span class="s2">False</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_tickvert_path</span>

    <span class="s1">_tri_path </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">([[</span><span class="s5">0.0</span><span class="s3">, </span><span class="s5">0.0</span><span class="s3">], [</span><span class="s5">0.0</span><span class="s3">, -</span><span class="s5">1.0</span><span class="s3">],</span>
                      <span class="s3">[</span><span class="s5">0.0</span><span class="s3">, </span><span class="s5">0.0</span><span class="s3">], [</span><span class="s5">0.8</span><span class="s3">, </span><span class="s5">0.5</span><span class="s3">],</span>
                      <span class="s3">[</span><span class="s5">0.0</span><span class="s3">, </span><span class="s5">0.0</span><span class="s3">], [-</span><span class="s5">0.8</span><span class="s3">, </span><span class="s5">0.5</span><span class="s3">]],</span>
                     <span class="s3">[</span><span class="s1">Path</span><span class="s3">.</span><span class="s1">MOVETO</span><span class="s3">, </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">LINETO</span><span class="s3">,</span>
                      <span class="s1">Path</span><span class="s3">.</span><span class="s1">MOVETO</span><span class="s3">, </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">LINETO</span><span class="s3">,</span>
                      <span class="s1">Path</span><span class="s3">.</span><span class="s1">MOVETO</span><span class="s3">, </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">LINETO</span><span class="s3">])</span>

    <span class="s2">def </span><span class="s1">_set_tri_down</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">Affine2D</span><span class="s3">().</span><span class="s1">scale</span><span class="s3">(</span><span class="s5">0.5</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_snap_threshold </span><span class="s3">= </span><span class="s5">5.0</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_filled </span><span class="s3">= </span><span class="s2">False</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_tri_path</span>

    <span class="s2">def </span><span class="s1">_set_tri_up</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_set_tri_down</span><span class="s3">()</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span><span class="s3">.</span><span class="s1">rotate_deg</span><span class="s3">(</span><span class="s5">180</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">_set_tri_left</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_set_tri_down</span><span class="s3">()</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span><span class="s3">.</span><span class="s1">rotate_deg</span><span class="s3">(</span><span class="s5">270</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">_set_tri_right</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_set_tri_down</span><span class="s3">()</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span><span class="s3">.</span><span class="s1">rotate_deg</span><span class="s3">(</span><span class="s5">90</span><span class="s3">)</span>

    <span class="s1">_caret_path </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">([[-</span><span class="s5">1.0</span><span class="s3">, </span><span class="s5">1.5</span><span class="s3">], [</span><span class="s5">0.0</span><span class="s3">, </span><span class="s5">0.0</span><span class="s3">], [</span><span class="s5">1.0</span><span class="s3">, </span><span class="s5">1.5</span><span class="s3">]])</span>

    <span class="s2">def </span><span class="s1">_set_caretdown</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">Affine2D</span><span class="s3">().</span><span class="s1">scale</span><span class="s3">(</span><span class="s5">0.5</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_snap_threshold </span><span class="s3">= </span><span class="s5">3.0</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_filled </span><span class="s3">= </span><span class="s2">False</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_caret_path</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_joinstyle </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_user_joinstyle </span><span class="s2">or </span><span class="s1">JoinStyle</span><span class="s3">.</span><span class="s1">miter</span>

    <span class="s2">def </span><span class="s1">_set_caretup</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_set_caretdown</span><span class="s3">()</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span><span class="s3">.</span><span class="s1">rotate_deg</span><span class="s3">(</span><span class="s5">180</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">_set_caretleft</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_set_caretdown</span><span class="s3">()</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span><span class="s3">.</span><span class="s1">rotate_deg</span><span class="s3">(</span><span class="s5">270</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">_set_caretright</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_set_caretdown</span><span class="s3">()</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span><span class="s3">.</span><span class="s1">rotate_deg</span><span class="s3">(</span><span class="s5">90</span><span class="s3">)</span>

    <span class="s1">_caret_path_base </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">([[-</span><span class="s5">1.0</span><span class="s3">, </span><span class="s5">0.0</span><span class="s3">], [</span><span class="s5">0.0</span><span class="s3">, -</span><span class="s5">1.5</span><span class="s3">], [</span><span class="s5">1.0</span><span class="s3">, </span><span class="s5">0</span><span class="s3">]])</span>

    <span class="s2">def </span><span class="s1">_set_caretdownbase</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_set_caretdown</span><span class="s3">()</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_caret_path_base</span>

    <span class="s2">def </span><span class="s1">_set_caretupbase</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_set_caretdownbase</span><span class="s3">()</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span><span class="s3">.</span><span class="s1">rotate_deg</span><span class="s3">(</span><span class="s5">180</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">_set_caretleftbase</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_set_caretdownbase</span><span class="s3">()</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span><span class="s3">.</span><span class="s1">rotate_deg</span><span class="s3">(</span><span class="s5">270</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">_set_caretrightbase</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_set_caretdownbase</span><span class="s3">()</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span><span class="s3">.</span><span class="s1">rotate_deg</span><span class="s3">(</span><span class="s5">90</span><span class="s3">)</span>

    <span class="s1">_plus_path </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">([[-</span><span class="s5">1.0</span><span class="s3">, </span><span class="s5">0.0</span><span class="s3">], [</span><span class="s5">1.0</span><span class="s3">, </span><span class="s5">0.0</span><span class="s3">],</span>
                       <span class="s3">[</span><span class="s5">0.0</span><span class="s3">, -</span><span class="s5">1.0</span><span class="s3">], [</span><span class="s5">0.0</span><span class="s3">, </span><span class="s5">1.0</span><span class="s3">]],</span>
                      <span class="s3">[</span><span class="s1">Path</span><span class="s3">.</span><span class="s1">MOVETO</span><span class="s3">, </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">LINETO</span><span class="s3">,</span>
                       <span class="s1">Path</span><span class="s3">.</span><span class="s1">MOVETO</span><span class="s3">, </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">LINETO</span><span class="s3">])</span>

    <span class="s2">def </span><span class="s1">_set_plus</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">Affine2D</span><span class="s3">().</span><span class="s1">scale</span><span class="s3">(</span><span class="s5">0.5</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_snap_threshold </span><span class="s3">= </span><span class="s5">1.0</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_filled </span><span class="s3">= </span><span class="s2">False</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_plus_path</span>

    <span class="s1">_x_path </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">([[-</span><span class="s5">1.0</span><span class="s3">, -</span><span class="s5">1.0</span><span class="s3">], [</span><span class="s5">1.0</span><span class="s3">, </span><span class="s5">1.0</span><span class="s3">],</span>
                    <span class="s3">[-</span><span class="s5">1.0</span><span class="s3">, </span><span class="s5">1.0</span><span class="s3">], [</span><span class="s5">1.0</span><span class="s3">, -</span><span class="s5">1.0</span><span class="s3">]],</span>
                   <span class="s3">[</span><span class="s1">Path</span><span class="s3">.</span><span class="s1">MOVETO</span><span class="s3">, </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">LINETO</span><span class="s3">,</span>
                    <span class="s1">Path</span><span class="s3">.</span><span class="s1">MOVETO</span><span class="s3">, </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">LINETO</span><span class="s3">])</span>

    <span class="s2">def </span><span class="s1">_set_x</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">Affine2D</span><span class="s3">().</span><span class="s1">scale</span><span class="s3">(</span><span class="s5">0.5</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_snap_threshold </span><span class="s3">= </span><span class="s5">3.0</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_filled </span><span class="s3">= </span><span class="s2">False</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_x_path</span>

    <span class="s1">_plus_filled_path </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">_create_closed</span><span class="s3">(</span><span class="s1">np</span><span class="s3">.</span><span class="s1">array</span><span class="s3">([</span>
        <span class="s3">(-</span><span class="s5">1</span><span class="s3">, -</span><span class="s5">3</span><span class="s3">), (+</span><span class="s5">1</span><span class="s3">, -</span><span class="s5">3</span><span class="s3">), (+</span><span class="s5">1</span><span class="s3">, -</span><span class="s5">1</span><span class="s3">), (+</span><span class="s5">3</span><span class="s3">, -</span><span class="s5">1</span><span class="s3">), (+</span><span class="s5">3</span><span class="s3">, +</span><span class="s5">1</span><span class="s3">), (+</span><span class="s5">1</span><span class="s3">, +</span><span class="s5">1</span><span class="s3">),</span>
        <span class="s3">(+</span><span class="s5">1</span><span class="s3">, +</span><span class="s5">3</span><span class="s3">), (-</span><span class="s5">1</span><span class="s3">, +</span><span class="s5">3</span><span class="s3">), (-</span><span class="s5">1</span><span class="s3">, +</span><span class="s5">1</span><span class="s3">), (-</span><span class="s5">3</span><span class="s3">, +</span><span class="s5">1</span><span class="s3">), (-</span><span class="s5">3</span><span class="s3">, -</span><span class="s5">1</span><span class="s3">), (-</span><span class="s5">1</span><span class="s3">, -</span><span class="s5">1</span><span class="s3">)]) / </span><span class="s5">6</span><span class="s3">)</span>
    <span class="s1">_plus_filled_path_t </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">_create_closed</span><span class="s3">(</span><span class="s1">np</span><span class="s3">.</span><span class="s1">array</span><span class="s3">([</span>
        <span class="s3">(+</span><span class="s5">3</span><span class="s3">, </span><span class="s5">0</span><span class="s3">), (+</span><span class="s5">3</span><span class="s3">, +</span><span class="s5">1</span><span class="s3">), (+</span><span class="s5">1</span><span class="s3">, +</span><span class="s5">1</span><span class="s3">), (+</span><span class="s5">1</span><span class="s3">, +</span><span class="s5">3</span><span class="s3">),</span>
        <span class="s3">(-</span><span class="s5">1</span><span class="s3">, +</span><span class="s5">3</span><span class="s3">), (-</span><span class="s5">1</span><span class="s3">, +</span><span class="s5">1</span><span class="s3">), (-</span><span class="s5">3</span><span class="s3">, +</span><span class="s5">1</span><span class="s3">), (-</span><span class="s5">3</span><span class="s3">, </span><span class="s5">0</span><span class="s3">)]) / </span><span class="s5">6</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">_set_plus_filled</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">Affine2D</span><span class="s3">()</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_snap_threshold </span><span class="s3">= </span><span class="s5">5.0</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_joinstyle </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_user_joinstyle </span><span class="s2">or </span><span class="s1">JoinStyle</span><span class="s3">.</span><span class="s1">miter</span>
        <span class="s2">if not </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_half_fill</span><span class="s3">():</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_plus_filled_path</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s4"># Rotate top half path to support all partitions</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_path </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_plus_filled_path_t</span>
            <span class="s1">fs </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">get_fillstyle</span><span class="s3">()</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span><span class="s3">.</span><span class="s1">rotate_deg</span><span class="s3">(</span>
                <span class="s3">{</span><span class="s6">'top'</span><span class="s3">: </span><span class="s5">0</span><span class="s3">, </span><span class="s6">'left'</span><span class="s3">: </span><span class="s5">90</span><span class="s3">, </span><span class="s6">'bottom'</span><span class="s3">: </span><span class="s5">180</span><span class="s3">, </span><span class="s6">'right'</span><span class="s3">: </span><span class="s5">270</span><span class="s3">}[</span><span class="s1">fs</span><span class="s3">])</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_transform </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span><span class="s3">.</span><span class="s1">frozen</span><span class="s3">().</span><span class="s1">rotate_deg</span><span class="s3">(</span><span class="s5">180</span><span class="s3">)</span>

    <span class="s1">_x_filled_path </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">_create_closed</span><span class="s3">(</span><span class="s1">np</span><span class="s3">.</span><span class="s1">array</span><span class="s3">([</span>
        <span class="s3">(-</span><span class="s5">1</span><span class="s3">, -</span><span class="s5">2</span><span class="s3">), (</span><span class="s5">0</span><span class="s3">, -</span><span class="s5">1</span><span class="s3">), (+</span><span class="s5">1</span><span class="s3">, -</span><span class="s5">2</span><span class="s3">), (+</span><span class="s5">2</span><span class="s3">, -</span><span class="s5">1</span><span class="s3">), (+</span><span class="s5">1</span><span class="s3">, </span><span class="s5">0</span><span class="s3">), (+</span><span class="s5">2</span><span class="s3">, +</span><span class="s5">1</span><span class="s3">),</span>
        <span class="s3">(+</span><span class="s5">1</span><span class="s3">, +</span><span class="s5">2</span><span class="s3">), (</span><span class="s5">0</span><span class="s3">, +</span><span class="s5">1</span><span class="s3">), (-</span><span class="s5">1</span><span class="s3">, +</span><span class="s5">2</span><span class="s3">), (-</span><span class="s5">2</span><span class="s3">, +</span><span class="s5">1</span><span class="s3">), (-</span><span class="s5">1</span><span class="s3">, </span><span class="s5">0</span><span class="s3">), (-</span><span class="s5">2</span><span class="s3">, -</span><span class="s5">1</span><span class="s3">)]) / </span><span class="s5">4</span><span class="s3">)</span>
    <span class="s1">_x_filled_path_t </span><span class="s3">= </span><span class="s1">Path</span><span class="s3">.</span><span class="s1">_create_closed</span><span class="s3">(</span><span class="s1">np</span><span class="s3">.</span><span class="s1">array</span><span class="s3">([</span>
        <span class="s3">(+</span><span class="s5">1</span><span class="s3">, </span><span class="s5">0</span><span class="s3">), (+</span><span class="s5">2</span><span class="s3">, +</span><span class="s5">1</span><span class="s3">), (+</span><span class="s5">1</span><span class="s3">, +</span><span class="s5">2</span><span class="s3">), (</span><span class="s5">0</span><span class="s3">, +</span><span class="s5">1</span><span class="s3">),</span>
        <span class="s3">(-</span><span class="s5">1</span><span class="s3">, +</span><span class="s5">2</span><span class="s3">), (-</span><span class="s5">2</span><span class="s3">, +</span><span class="s5">1</span><span class="s3">), (-</span><span class="s5">1</span><span class="s3">, </span><span class="s5">0</span><span class="s3">)]) / </span><span class="s5">4</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">_set_x_filled</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform </span><span class="s3">= </span><span class="s1">Affine2D</span><span class="s3">()</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_snap_threshold </span><span class="s3">= </span><span class="s5">5.0</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_joinstyle </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_user_joinstyle </span><span class="s2">or </span><span class="s1">JoinStyle</span><span class="s3">.</span><span class="s1">miter</span>
        <span class="s2">if not </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_half_fill</span><span class="s3">():</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_x_filled_path</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s4"># Rotate top half path to support all partitions</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_path </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_path </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_x_filled_path_t</span>
            <span class="s1">fs </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">get_fillstyle</span><span class="s3">()</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span><span class="s3">.</span><span class="s1">rotate_deg</span><span class="s3">(</span>
                <span class="s3">{</span><span class="s6">'top'</span><span class="s3">: </span><span class="s5">0</span><span class="s3">, </span><span class="s6">'left'</span><span class="s3">: </span><span class="s5">90</span><span class="s3">, </span><span class="s6">'bottom'</span><span class="s3">: </span><span class="s5">180</span><span class="s3">, </span><span class="s6">'right'</span><span class="s3">: </span><span class="s5">270</span><span class="s3">}[</span><span class="s1">fs</span><span class="s3">])</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_alt_transform </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_transform</span><span class="s3">.</span><span class="s1">frozen</span><span class="s3">().</span><span class="s1">rotate_deg</span><span class="s3">(</span><span class="s5">180</span><span class="s3">)</span>
</pre>
</body>
</html>