<html>
<head>
<title>_user_array_impl.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #5f826b; font-style: italic;}
.s1 { color: #bcbec4;}
.s2 { color: #cf8e6d;}
.s3 { color: #bcbec4;}
.s4 { color: #2aacb8;}
.s5 { color: #6aab73;}
.s6 { color: #7a7e85;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
_user_array_impl.py</font>
</center></td></tr></table>
<pre><span class="s0">&quot;&quot;&quot; 
Container class for backward compatibility with NumArray. 
 
The user_array.container class exists for backward compatibility with NumArray 
and is not meant to be used in new code. If you need to create an array 
container class, we recommend either creating a class that wraps an ndarray 
or subclasses ndarray. 
 
&quot;&quot;&quot;</span>
<span class="s2">from </span><span class="s1">numpy</span><span class="s3">.</span><span class="s1">_core </span><span class="s2">import </span><span class="s3">(</span>
    <span class="s1">array</span><span class="s3">, </span><span class="s1">asarray</span><span class="s3">, </span><span class="s1">absolute</span><span class="s3">, </span><span class="s1">add</span><span class="s3">, </span><span class="s1">subtract</span><span class="s3">, </span><span class="s1">multiply</span><span class="s3">, </span><span class="s1">divide</span><span class="s3">,</span>
    <span class="s1">remainder</span><span class="s3">, </span><span class="s1">power</span><span class="s3">, </span><span class="s1">left_shift</span><span class="s3">, </span><span class="s1">right_shift</span><span class="s3">, </span><span class="s1">bitwise_and</span><span class="s3">, </span><span class="s1">bitwise_or</span><span class="s3">,</span>
    <span class="s1">bitwise_xor</span><span class="s3">, </span><span class="s1">invert</span><span class="s3">, </span><span class="s1">less</span><span class="s3">, </span><span class="s1">less_equal</span><span class="s3">, </span><span class="s1">not_equal</span><span class="s3">, </span><span class="s1">equal</span><span class="s3">, </span><span class="s1">greater</span><span class="s3">,</span>
    <span class="s1">greater_equal</span><span class="s3">, </span><span class="s1">shape</span><span class="s3">, </span><span class="s1">reshape</span><span class="s3">, </span><span class="s1">arange</span><span class="s3">, </span><span class="s1">sin</span><span class="s3">, </span><span class="s1">sqrt</span><span class="s3">, </span><span class="s1">transpose</span>
<span class="s3">)</span>


<span class="s2">class </span><span class="s1">container</span><span class="s3">:</span>
    <span class="s0">&quot;&quot;&quot; 
    container(data, dtype=None, copy=True) 
 
    Standard container-class for easy multiple-inheritance. 
 
    Methods 
    ------- 
    copy 
    tostring 
    byteswap 
    astype 
 
    &quot;&quot;&quot;</span>
    <span class="s2">def </span><span class="s1">__init__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">data</span><span class="s3">, </span><span class="s1">dtype</span><span class="s3">=</span><span class="s2">None</span><span class="s3">, </span><span class="s1">copy</span><span class="s3">=</span><span class="s2">True</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">array </span><span class="s3">= </span><span class="s1">array</span><span class="s3">(</span><span class="s1">data</span><span class="s3">, </span><span class="s1">dtype</span><span class="s3">, </span><span class="s1">copy</span><span class="s3">=</span><span class="s1">copy</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">__repr__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">if </span><span class="s1">self</span><span class="s3">.</span><span class="s1">ndim </span><span class="s3">&gt; </span><span class="s4">0</span><span class="s3">:</span>
            <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">__class__</span><span class="s3">.</span><span class="s1">__name__ </span><span class="s3">+ </span><span class="s1">repr</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">)[</span><span class="s1">len</span><span class="s3">(</span><span class="s5">&quot;array&quot;</span><span class="s3">):]</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">__class__</span><span class="s3">.</span><span class="s1">__name__ </span><span class="s3">+ </span><span class="s5">&quot;(&quot; </span><span class="s3">+ </span><span class="s1">repr</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">) + </span><span class="s5">&quot;)&quot;</span>

    <span class="s2">def </span><span class="s1">__array__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">t</span><span class="s3">=</span><span class="s2">None</span><span class="s3">):</span>
        <span class="s2">if </span><span class="s1">t</span><span class="s3">:</span>
            <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">.</span><span class="s1">astype</span><span class="s3">(</span><span class="s1">t</span><span class="s3">)</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span>

    <span class="s6"># Array as sequence</span>
    <span class="s2">def </span><span class="s1">__len__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">len</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">__getitem__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">index</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">[</span><span class="s1">index</span><span class="s3">])</span>

    <span class="s2">def </span><span class="s1">__setitem__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">index</span><span class="s3">, </span><span class="s1">value</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">[</span><span class="s1">index</span><span class="s3">] = </span><span class="s1">asarray</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">dtype</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">__abs__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">absolute</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">__neg__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(-</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">__add__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array </span><span class="s3">+ </span><span class="s1">asarray</span><span class="s3">(</span><span class="s1">other</span><span class="s3">))</span>

    <span class="s1">__radd__ </span><span class="s3">= </span><span class="s1">__add__</span>

    <span class="s2">def </span><span class="s1">__iadd__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s1">add</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">other</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">)</span>
        <span class="s2">return </span><span class="s1">self</span>

    <span class="s2">def </span><span class="s1">__sub__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array </span><span class="s3">- </span><span class="s1">asarray</span><span class="s3">(</span><span class="s1">other</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">__rsub__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">asarray</span><span class="s3">(</span><span class="s1">other</span><span class="s3">) - </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">__isub__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s1">subtract</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">other</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">)</span>
        <span class="s2">return </span><span class="s1">self</span>

    <span class="s2">def </span><span class="s1">__mul__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">multiply</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">asarray</span><span class="s3">(</span><span class="s1">other</span><span class="s3">)))</span>

    <span class="s1">__rmul__ </span><span class="s3">= </span><span class="s1">__mul__</span>

    <span class="s2">def </span><span class="s1">__imul__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s1">multiply</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">other</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">)</span>
        <span class="s2">return </span><span class="s1">self</span>

    <span class="s2">def </span><span class="s1">__div__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">divide</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">asarray</span><span class="s3">(</span><span class="s1">other</span><span class="s3">)))</span>

    <span class="s2">def </span><span class="s1">__rdiv__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">divide</span><span class="s3">(</span><span class="s1">asarray</span><span class="s3">(</span><span class="s1">other</span><span class="s3">), </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">__idiv__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s1">divide</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">other</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">)</span>
        <span class="s2">return </span><span class="s1">self</span>

    <span class="s2">def </span><span class="s1">__mod__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">remainder</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">other</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">__rmod__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">remainder</span><span class="s3">(</span><span class="s1">other</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">__imod__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s1">remainder</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">other</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">)</span>
        <span class="s2">return </span><span class="s1">self</span>

    <span class="s2">def </span><span class="s1">__divmod__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">divide</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">other</span><span class="s3">)),</span>
                <span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">remainder</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">other</span><span class="s3">)))</span>

    <span class="s2">def </span><span class="s1">__rdivmod__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">divide</span><span class="s3">(</span><span class="s1">other</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">)),</span>
                <span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">remainder</span><span class="s3">(</span><span class="s1">other</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">)))</span>

    <span class="s2">def </span><span class="s1">__pow__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">power</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">asarray</span><span class="s3">(</span><span class="s1">other</span><span class="s3">)))</span>

    <span class="s2">def </span><span class="s1">__rpow__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">power</span><span class="s3">(</span><span class="s1">asarray</span><span class="s3">(</span><span class="s1">other</span><span class="s3">), </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">__ipow__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s1">power</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">other</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">)</span>
        <span class="s2">return </span><span class="s1">self</span>

    <span class="s2">def </span><span class="s1">__lshift__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">left_shift</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">other</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">__rshift__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">right_shift</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">other</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">__rlshift__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">left_shift</span><span class="s3">(</span><span class="s1">other</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">__rrshift__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">right_shift</span><span class="s3">(</span><span class="s1">other</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">__ilshift__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s1">left_shift</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">other</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">)</span>
        <span class="s2">return </span><span class="s1">self</span>

    <span class="s2">def </span><span class="s1">__irshift__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s1">right_shift</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">other</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">)</span>
        <span class="s2">return </span><span class="s1">self</span>

    <span class="s2">def </span><span class="s1">__and__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">bitwise_and</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">other</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">__rand__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">bitwise_and</span><span class="s3">(</span><span class="s1">other</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">__iand__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s1">bitwise_and</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">other</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">)</span>
        <span class="s2">return </span><span class="s1">self</span>

    <span class="s2">def </span><span class="s1">__xor__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">bitwise_xor</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">other</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">__rxor__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">bitwise_xor</span><span class="s3">(</span><span class="s1">other</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">__ixor__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s1">bitwise_xor</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">other</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">)</span>
        <span class="s2">return </span><span class="s1">self</span>

    <span class="s2">def </span><span class="s1">__or__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">bitwise_or</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">other</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">__ror__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">bitwise_or</span><span class="s3">(</span><span class="s1">other</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">__ior__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s1">bitwise_or</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">other</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">)</span>
        <span class="s2">return </span><span class="s1">self</span>

    <span class="s2">def </span><span class="s1">__pos__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">__invert__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">invert</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">_scalarfunc</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">func</span><span class="s3">):</span>
        <span class="s2">if </span><span class="s1">self</span><span class="s3">.</span><span class="s1">ndim </span><span class="s3">== </span><span class="s4">0</span><span class="s3">:</span>
            <span class="s2">return </span><span class="s1">func</span><span class="s3">(</span><span class="s1">self</span><span class="s3">[</span><span class="s4">0</span><span class="s3">])</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s2">raise </span><span class="s1">TypeError</span><span class="s3">(</span>
                <span class="s5">&quot;only rank-0 arrays can be converted to Python scalars.&quot;</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">__complex__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_scalarfunc</span><span class="s3">(</span><span class="s1">complex</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">__float__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_scalarfunc</span><span class="s3">(</span><span class="s1">float</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">__int__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_scalarfunc</span><span class="s3">(</span><span class="s1">int</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">__hex__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_scalarfunc</span><span class="s3">(</span><span class="s1">hex</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">__oct__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_scalarfunc</span><span class="s3">(</span><span class="s1">oct</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">__lt__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">less</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">other</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">__le__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">less_equal</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">other</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">__eq__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">equal</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">other</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">__ne__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">not_equal</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">other</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">__gt__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">greater</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">other</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">__ge__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">other</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">greater_equal</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s1">other</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">copy</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s0">&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">.</span><span class="s1">copy</span><span class="s3">())</span>

    <span class="s2">def </span><span class="s1">tostring</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s0">&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">.</span><span class="s1">tostring</span><span class="s3">()</span>

    <span class="s2">def </span><span class="s1">tobytes</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s0">&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">.</span><span class="s1">tobytes</span><span class="s3">()</span>

    <span class="s2">def </span><span class="s1">byteswap</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s0">&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">.</span><span class="s1">byteswap</span><span class="s3">())</span>

    <span class="s2">def </span><span class="s1">astype</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">typecode</span><span class="s3">):</span>
        <span class="s0">&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">.</span><span class="s1">astype</span><span class="s3">(</span><span class="s1">typecode</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">_rc</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">a</span><span class="s3">):</span>
        <span class="s2">if </span><span class="s1">len</span><span class="s3">(</span><span class="s1">shape</span><span class="s3">(</span><span class="s1">a</span><span class="s3">)) == </span><span class="s4">0</span><span class="s3">:</span>
            <span class="s2">return </span><span class="s1">a</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">__class__</span><span class="s3">(</span><span class="s1">a</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">__array_wrap__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, *</span><span class="s1">args</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">__class__</span><span class="s3">(</span><span class="s1">args</span><span class="s3">[</span><span class="s4">0</span><span class="s3">])</span>

    <span class="s2">def </span><span class="s1">__setattr__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">attr</span><span class="s3">, </span><span class="s1">value</span><span class="s3">):</span>
        <span class="s2">if </span><span class="s1">attr </span><span class="s3">== </span><span class="s5">'array'</span><span class="s3">:</span>
            <span class="s1">object</span><span class="s3">.</span><span class="s1">__setattr__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">attr</span><span class="s3">, </span><span class="s1">value</span><span class="s3">)</span>
            <span class="s2">return</span>
        <span class="s2">try</span><span class="s3">:</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">.</span><span class="s1">__setattr__</span><span class="s3">(</span><span class="s1">attr</span><span class="s3">, </span><span class="s1">value</span><span class="s3">)</span>
        <span class="s2">except </span><span class="s1">AttributeError</span><span class="s3">:</span>
            <span class="s1">object</span><span class="s3">.</span><span class="s1">__setattr__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">attr</span><span class="s3">, </span><span class="s1">value</span><span class="s3">)</span>

    <span class="s6"># Only called after other approaches fail.</span>
    <span class="s2">def </span><span class="s1">__getattr__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">attr</span><span class="s3">):</span>
        <span class="s2">if </span><span class="s3">(</span><span class="s1">attr </span><span class="s3">== </span><span class="s5">'array'</span><span class="s3">):</span>
            <span class="s2">return </span><span class="s1">object</span><span class="s3">.</span><span class="s1">__getattribute__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">attr</span><span class="s3">)</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">array</span><span class="s3">.</span><span class="s1">__getattribute__</span><span class="s3">(</span><span class="s1">attr</span><span class="s3">)</span>


<span class="s6">#############################################################</span>
<span class="s6"># Test of class container</span>
<span class="s6">#############################################################</span>
<span class="s2">if </span><span class="s1">__name__ </span><span class="s3">== </span><span class="s5">'__main__'</span><span class="s3">:</span>
    <span class="s1">temp </span><span class="s3">= </span><span class="s1">reshape</span><span class="s3">(</span><span class="s1">arange</span><span class="s3">(</span><span class="s4">10000</span><span class="s3">), (</span><span class="s4">100</span><span class="s3">, </span><span class="s4">100</span><span class="s3">))</span>

    <span class="s1">ua </span><span class="s3">= </span><span class="s1">container</span><span class="s3">(</span><span class="s1">temp</span><span class="s3">)</span>
    <span class="s6"># new object created begin test</span>
    <span class="s1">print</span><span class="s3">(</span><span class="s1">dir</span><span class="s3">(</span><span class="s1">ua</span><span class="s3">))</span>
    <span class="s1">print</span><span class="s3">(</span><span class="s1">shape</span><span class="s3">(</span><span class="s1">ua</span><span class="s3">), </span><span class="s1">ua</span><span class="s3">.</span><span class="s1">shape</span><span class="s3">)  </span><span class="s6"># I have changed Numeric.py</span>

    <span class="s1">ua_small </span><span class="s3">= </span><span class="s1">ua</span><span class="s3">[:</span><span class="s4">3</span><span class="s3">, :</span><span class="s4">5</span><span class="s3">]</span>
    <span class="s1">print</span><span class="s3">(</span><span class="s1">ua_small</span><span class="s3">)</span>
    <span class="s6"># this did not change ua[0,0], which is not normal behavior</span>
    <span class="s1">ua_small</span><span class="s3">[</span><span class="s4">0</span><span class="s3">, </span><span class="s4">0</span><span class="s3">] = </span><span class="s4">10</span>
    <span class="s1">print</span><span class="s3">(</span><span class="s1">ua_small</span><span class="s3">[</span><span class="s4">0</span><span class="s3">, </span><span class="s4">0</span><span class="s3">], </span><span class="s1">ua</span><span class="s3">[</span><span class="s4">0</span><span class="s3">, </span><span class="s4">0</span><span class="s3">])</span>
    <span class="s1">print</span><span class="s3">(</span><span class="s1">sin</span><span class="s3">(</span><span class="s1">ua_small</span><span class="s3">) / </span><span class="s4">3. </span><span class="s3">* </span><span class="s4">6. </span><span class="s3">+ </span><span class="s1">sqrt</span><span class="s3">(</span><span class="s1">ua_small </span><span class="s3">** </span><span class="s4">2</span><span class="s3">))</span>
    <span class="s1">print</span><span class="s3">(</span><span class="s1">less</span><span class="s3">(</span><span class="s1">ua_small</span><span class="s3">, </span><span class="s4">103</span><span class="s3">), </span><span class="s1">type</span><span class="s3">(</span><span class="s1">less</span><span class="s3">(</span><span class="s1">ua_small</span><span class="s3">, </span><span class="s4">103</span><span class="s3">)))</span>
    <span class="s1">print</span><span class="s3">(</span><span class="s1">type</span><span class="s3">(</span><span class="s1">ua_small </span><span class="s3">* </span><span class="s1">reshape</span><span class="s3">(</span><span class="s1">arange</span><span class="s3">(</span><span class="s4">15</span><span class="s3">), </span><span class="s1">shape</span><span class="s3">(</span><span class="s1">ua_small</span><span class="s3">))))</span>
    <span class="s1">print</span><span class="s3">(</span><span class="s1">reshape</span><span class="s3">(</span><span class="s1">ua_small</span><span class="s3">, (</span><span class="s4">5</span><span class="s3">, </span><span class="s4">3</span><span class="s3">)))</span>
    <span class="s1">print</span><span class="s3">(</span><span class="s1">transpose</span><span class="s3">(</span><span class="s1">ua_small</span><span class="s3">))</span>
</pre>
</body>
</html>